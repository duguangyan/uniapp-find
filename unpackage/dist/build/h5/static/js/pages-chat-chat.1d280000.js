(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-chat-chat"],{"00d3":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=d(a("0089")),s=d(a("2d20")),i=d(a("e378")),o=d(a("b031")),r=d(a("8bfb"));function d(t){return t&&t.__esModule?t:{default:t}}var c={data:function(){return{content:"",isFalse:!1,inputShowed:!1,isConfirmHold:!0,isScrollY:!0,toId:"",sms:0,baseUrl:"https://webapi.yidap.com",message_list:[],scroll_height:wx.getSystemInfoSync().windowHeight,page_index:0,mode:!0,cancel:!1,status:0,tips:["按住 说话","松开 结束","取消 发送"],state:{normal:0,pressed:1,cancel:2},toView:"",userId:wx.getStorageSync("userId"),to_avatar_path:"https://static.yidap.com/miniapp/o2o/imgs/collection@2x.png",currentPage:2,pageSize:10,scrollLoading:0,HideData:[],EventData:[],NoMoreEvent:0,noData:!0,fromUserPhoto:"",toUserPhoto:"",userInfoId:"",maxlength:500,messageCache:[],prevIndex:-1,totalSize:"",scrollTop:0}},onLoad:function(t){var e=uni.getStorageSync("avatar_path"),a=uni.getStorageSync("userId");t.id?this.$data.toId=t.id:this.$data.toId=t.toUserId,uni.setNavigationBarTitle({title:t.fmUserName}),this.$data.prevIndex=t.chatListIndex?t.chatListIndex:-1,this.$data.fromUserPhoto=t.fromUserPhoto?t.fromUserPhoto:"https://ossyidap.oss-cn-shenzhen.aliyuncs.com/image/png/9EAFE4BFEFDDF762718332C8F1BE9F2C.png",this.$data.toUserPhoto=e||"https://ossyidap.oss-cn-shenzhen.aliyuncs.com/image/png/9EAFE4BFEFDDF762718332C8F1BE9F2C.png",this.$data.userInfoId=parseInt(a)>parseInt(this.$data.toId)?o.default.md5(this.$data.toId+a):o.default.md5(a+this.$data.toId);var n={fromUserId:a,toUserId:this.$data.toId,content:"page",smsType:"TEXT",sysType:1,smsStatus:10,smsList:!1,currentPage:1,pageSize:10};this.sendSocketMessage(JSON.stringify(n))},mounted:function(){},onShow:function(){var t=this;this.globalData.callback=function(e){console.log("--\x3e>",e);var a=e;if("0"!=String(a.userInfoId)){var n=t.$data.HideData;t.$data.EventData;if(a&&a.list){t.$data.totalSize=a.totalSize;var s=a.list;if(!(s.length>0))return t.$data.noData=!1,!1;t.$data.currentPage>2&&(t.$data.HideData=s,t.$data.noData=!0),n=s.concat(n),t.$data.currentPage<=2?(t.$data.EventData=n,t.$data.toView="row_10",t.scrollToBottom()):t.$data.HideData=s;var i=t.$data.totalSize-t.$data.EventData.length-t.$data.HideData.length;if(0==i){t.$data.noData=!1;var o=uni.createSelectorQuery();o.select("#hideview").boundingClientRect(),o.exec(function(e){t.$data.scrollTop=e[0].height})}}else{if(a instanceof Array){var r=getCurrentPages(),d=r[r.length-2];return void(d.$data.lists=a)}if(0==a.fromUserId){if(-1!=a.content.indexOf("消息含有敏感内容")){var c=t.$data.messageCache.findIndex(function(t,e){return t.messageId==a.messageId});if(-1!=c){var l=t.$data.messageCache[c];t.$data.EventData[l.index].smsStatus=a.smsStatus,t.$data.messageCache.splice(c,1),clearTimeout(l.delay)}return}if(t.$data.messageCache.length>0)if(a.currentPage&&""!=a.currentPage)t.$data.messageCache.forEach(function(e,n){t.$data.EventData[e.index].smsStatus=a.smsStatus}),t.$data.messageCache=[];else{var u=t.$data.messageCache.findIndex(function(t,e){return t.messageId==a.messageId});if(-1!=u){var g=t.$data.messageCache[u];t.$data.EventData[g.index].smsStatus=a.smsStatus,50==a.smsStatus&&t.$data.messageCache.splice(u,1),clearTimeout(g.delay)}}return}var f={id:a.id,fromUserId:0,toUserId:a.fromUserId,messageId:a.messageId,content:"page",smsType:"TEXT",sysType:1,smsStatus:50,smsList:!1,currentPage:"",pageSize:""};t.sendSocketMessage(JSON.stringify(f)),console.log("通知对方我已经阅读消息"),a.userInfoId==t.$data.userInfoId&&t.$data.EventData.push(a),t.scrollToBottom(),t.getPrevPage(!0,a)}t.$data.currentPage<=2&&setTimeout(function(){t.bindscrolltoupper1()},1e3),t.$data.scrollLoading=0}}},methods:{bindscroll:function(t){var e=this;if(1==e.$data.scrollLoading)return!1;if(!e.$data.noData)return!1;if(t.detail.scrollTop<=10){var a=uni.createSelectorQuery();a.select("#hideview").boundingClientRect(),a.exec(function(t){var a=e.$data.EventData,n=e.$data.HideData;if(a=n.concat(e.$data.EventData),""==n||!n)return e.$data.NoMoreEvent=1,e.$data.scrollTop=0,!1;var s=e.$data.totalSize-e.$data.EventData.length-e.$data.HideData.length;s<10?setTimeout(function(){e.$data.EventData=a,e.bindscrolltoupper1()},1e3):setTimeout(function(){e.$data.EventData=a,e.$data.scrollTop=t[0].height,e.bindscrolltoupper1()},1e3)})}},bindscrolltoupper1:function(){var t=this;if(1==t.$data.scrollLoading)return!1;t.$data.scrollLoading=1;var e=this.$data.currentPage++,a=this.$data.pageSize;console.log("currentPage:"+e),uni.showNavigationBarLoading();var n=uni.getStorageSync("userId"),s=this.$data.toId,i={fromUserId:n,toUserId:s,content:"page",smsType:"TEXT",sysType:1,smsStatus:10,smsList:!1,currentPage:e,pageSize:a};console.log("下拉message：",i),this.sendSocketMessage(JSON.stringify(i)),uni.hideNavigationBarLoading(),uni.stopPullDownRefresh()},getPrevPage:function(t,e){if(-1!=this.$data.prevIndex){var a=getCurrentPages(),n=a[a.length-2],s=n.$data.lists;if(t){var i=n.$data.lists,o=i.findIndex(function(t,a){return t.userInfoId=e.userInfoId});-1!=o?i[this.$data.prevIndex].userMessage=e:n.onSend()}else{var r=new Date,d={content:e.content,createTime:r.getTime(),dateTime:r.getHours()+":"+r.getMinutes(),fromUserId:e.fromUserId,smsStatus:30,smsType:e.smsType,toUserId:e.toUserId,userInfoId:e.userInfoId};s[this.$data.prevIndex].userMessage=d}n.$data.lists=s}},getMessageBySocket:function(){var t={};t.userId=uni.getStorageSync("userId"),s.default.getMessageBySocket({method:"POST",data:t}).then(function(t){})},getUserInfoformSocket:function(){var t=this,e={};e.userId=uni.getStorageSync("userId"),s.default.getUserInfoformSocket({method:"POST",data:e}).then(function(e){t.$data.to_avatar_path=e.avatar_path})},audioPlay:function(t){var e=t.currentTarget.dataset.id;this.audioCtx=uni.createAudioContext(e),this.audioCtx.play()},reply:function(t){var e=this,a=this,n=t?t.detail.value:this.$data.content;if(this.$data.content=n,""!=n){var s=this.$data.EventData,i=uni.getStorageSync("userId"),d=this.$data.toId,c=(new Date).getTime()+i+d+r.default.math(5);c=o.default.md5(c);var l={fromUserId:i,toUserId:d,messageId:c,content:n,smsType:"TEXT",sysType:1,smsStatus:10,smsList:!1,currentPage:"",pageSize:""};this.globalData.localSocket.send({data:JSON.stringify(l),success:function(){console.log("sendSocketMessage:成功了");var t=s.push(l);console.log(s),a.$data.inputShowed=!0,a.$data.EventData=s,a.$data.content="",a.timeout(c,t-1),a.getPrevPage(!1,l)},fail:function(){a.sendError(len-1)}}),console.log("EventData --\x3e"),console.log(this.$data.EventData),setTimeout(function(){e.scrollToBottom()},100)}else uni.showToast({title:"总要写点什么吧"})},chooseImage:function(){var t=this,e=this;uni.chooseImage({count:9,sizeType:["compressed"],sourceType:["album","camera"],success:function(a){var n=a.tempFilePaths;console.log("选择的图片",n),n.forEach(function(a){var n=wx.getStorageSync("userId"),s=t.$data.toId,i=a,d=(new Date).getTime()+n+s+r.default.math(5);d=o.default.md5(d);var c={fromUserId:n,toUserId:s,messageId:d,content:i,smsType:"IMAGE",sysType:1,smsStatus:10,smsList:!1,currentPage:"",pageSize:""},l=e.$data.EventData,u=l.push(c);e.$data.EventData=l,t.upload(a,"image",c,u)})}})},preview:function(t){var e=t.currentTarget.dataset.src,a=e.indexOf("?");-1!=a&&(e=e.substring(0,a)+"?x-oss-process=style/big"),uni.previewImage({current:e,urls:[e]})},switchMode:function(){},record:function(){console.log("------------------"),console.log(this.$data.cancel);var t=this;wx.startRecord({success:function(e){console.log("------------------"),console.log(t.$data.cancel),t.$data.cancel||t.upload(e.tempFilePath,"voice")},fail:function(t){console.log(t)},complete:function(t){console.log(t)}})},stop:function(){uni.stopRecord()},touchStart:function(t){var e=t.touches[0].clientY;this.setData({startY:e,status:this.$data.state.pressed})},touchMove:function(t){var e=t.touches[0].clientY,a=this.$data.startY-e;this.setData({status:a>50?this.$data.state.cancel:this.$data.state.pressed})},touchEnd:function(t){var e=t.changedTouches[0].clientY,a=this.$data.startY-e;this.setData({cancel:a>50,status:this.$data.state.normal}),this.stop()},upload:function(t,e,a,s){var o=this,r=this;if("image"==e){var d=uni.getStorageSync("access_token")||uni.getStorageSync("token")||"",c={file:"[object Object]",type:"big"},l=Date.parse(new Date);c.timestamp=l,c.sign=i.default.makeSign(n.default.apiUrl+"/api/upload",c),c.deviceId="wx",c.platformType="1",c.versionCode="4.0";uni.uploadFile({url:"".concat(n.default.apiUrl,"/api/upload"),filePath:t,name:"file",header:{"content-type":"multipart/form-data",Accept:"application/json",Authorization:"Bearer ".concat(d)},formData:c,success:function(t){console.log(t);t=JSON.parse(t.data);200===t.code||0===t.code?(a.content=t.data,o.globalData.localSocket.send({data:JSON.stringify(a),success:function(){r.timeout(a.messageId,s-1),r.getPrevPage(!1,a)},fail:function(){r.sendError(s-1)}})):r.sendError(s-1)},fail:function(t){r.sendError(s-1)},complete:function(){o.scrollToBottom()}})}setTimeout(function(){o.scrollToBottom(),uni.hideLoading()},300)},sendError:function(t){var e=this,a=this.$data.EventData[t];a&&(a.smsStatus=20,e.$data.EventData=e.$data.EventData)},timeout:function(t,e){var a=this,n=this,s=setTimeout(function(){if(n.$data.messageCache.length>0){var s=n.$data.messageCache.findIndex(function(e,a){return e.messageId==t});-1!=s&&(n.$data.EventData[e].smsStatus=20,n.$data.EventData=n.$data.EventData,clearTimeout(a))}},6e4);n.$data.messageCache.push({messageId:t,delay:s,index:e})},retry:function(t){var e=this,a=t.currentTarget.dataset.key,n=e.$data.EventData[a];n&&(n.smsStatus=10,e.$data.EventData=e.$data.EventData,this.globalData.localSocket.send({data:JSON.stringify(n),success:function(){e.timeout(n.messageId,a)},fail:function(){console.log("消息重试失败")}}))},scrollToBottom:function(){this.$data.toView="row_"+(this.$data.EventData.length-1)}}};e.default=c},"2d20":function(t,e,a){"use strict";var n=s(a("d4cf"));function s(t){return t&&t.__esModule?t:{default:t}}var i="https://webapi.yidap.com";function o(t,e){for(var a=Object.keys(e).sort(),s={},i=0;i<a.length;i++)s[a[i]]=e[a[i]];var o="";for(var r in s)o+=r+"="+s[r]+"&";var d="";d=t.indexOf("https://webapi.yidap.com")>-1?t.split("https://webapi.yidap.com")[1]:t.split("https://apiv2.yidap.com")[1];var c=d+"?"+o.substring(0,o.length-1)+"zhong_pi_lian";return c=c.replace("sign=&",""),(0,n.default)(c)}Promise.prototype.finally=function(t){var e=this.constructor;return this.then(function(a){return e.resolve(t()).then(function(){return a})},function(a){return e.resolve(t()).then(function(){throw a})})};var r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;return new Promise(function(i,r){var d=Date.parse(new Date),c=t.data||{};c.timestamp=d,c.sign=o(e,c),c.deviceId="wx",c.platformType="2",c.versionCode="4.0";var l=wx.getStorageSync("token")||"",u=wx.getStorageSync("token_type")||"Bearer",g={Accept:"application/json",Authorization:u+" "+l},f=e;void 0!=a&&(f=e+"/"+a),void 0!=n&&(f=f+"/"+n),void 0!=s&&(f=f+"?page="+s),wx.request({url:f,method:t.method||"GET",data:c,header:g,success:function(t){t=t.data;if(200===t.code||0===t.code)i(t);else{if(401===t.code){wx.hideLoading(),console.log("401统一处理");var e=wx.getStorageSync("fromCenter");wx.setStorageSync("fromCenter","0"),1!=e&&wx.showModal({title:"您尚未登录",content:"是否前往登录页面",confirmText:"前往",success:function(t){if(t.confirm)return wx.navigateTo({url:"../login/login"}),!1;t.cancel&&console.log("用户点击取消")}})}201===t.code&&wx.showToast({title:t.msg,icon:"none",duration:2e3}),r(t)}},fail:function(t){(t.errMsg||"request:fail timeout"===t.errMsg)&&(wx.showToast({title:"网络请求超时",image:"../../public/images/icon/error.png",duration:3e3}),wx.hideLoading())},complete:function(t){}})})},d=function(t){return r(t,"".concat(i,"/app/socket/getPhoto?userId=").concat(t.data.userId))},c=function(t){return r(t,"".concat(i,"/app/socket/getMessage"))},l=function(t){return r(t,"".concat(i,"/app/socket/getCacheMessage"))},u=function(t){return r(t,"".concat(i,"/app/socket/getPhoto"))};t.exports={getPhotoByIM:u,getCacheMessage:l,getMessageBySocket:c,getUserInfoformSocket:d}},4082:function(t,e,a){"use strict";a.r(e);var n=a("f89e"),s=a("c603");for(var i in s)"default"!==i&&function(t){a.d(e,t,function(){return s[t]})}(i);a("9ce0");var o=a("2877"),r=Object(o["a"])(s["default"],n["a"],n["b"],!1,null,"4d90a324",null);e["default"]=r.exports},"6d8a":function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */\n/** 聊天窗口样式\n * 54px为回复框高度，js同\n */.loding-img[data-v-4d90a324]{height:%?60?%;width:100%;background:#ebebeb;text-align:center;margin-bottom:%?40?%}.loding-img uni-image[data-v-4d90a324]{width:%?60?%;height:%?60?%}.loding-img uni-view[data-v-4d90a324]{line-height:%?60?%}\n/*聊天记录*/.message-list[data-v-4d90a324]{\n  /*margin-bottom: 54px;*/background:#ebebeb;padding-bottom:%?100?%}\n/*单元行*/.row[data-v-4d90a324]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin:0;margin-bottom:%?40?%}\n/*日期*/.datetime[data-v-4d90a324]{font-size:14px;margin-bottom:20px;color:#999;text-align:center}\n/*主体*/.body[data-v-4d90a324]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:start;-webkit-align-items:flex-start;-ms-flex-align:start;align-items:flex-start;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;width:100%}\n/*头像容器*/.body.avatar-container[data-v-4d90a324]{width:20%}\n/*头像*/.body .avatar[data-v-4d90a324]{width:%?80?%;height:%?80?%;border-radius:50%;margin:0 %?20?%}\n/*文本消息*/.body .msg-content[data-v-4d90a324]{display:inline-block;font-size:%?28?%;background:#fff;border-radius:%?10?%;padding:%?20?%;line-height:%?44?%;position:relative;left:%?-2?%;top:0;word-break:break-all;max-width:calc(85% - %?140?%)}.body .msg-image[data-v-4d90a324]{display:inline-block;position:relative}\n/* 三角箭头 */.body .triangle[data-v-4d90a324]{background:#fff;width:%?20?%;height:%?20?%;margin-top:%?30?%;-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg);position:absolute}.msg-text[data-v-4d90a324]{font-size:%?30?%}.msg-status[data-v-4d90a324]{font-size:10px;display:block;margin-right:60px;color:#999;text-align:right}.msg-img[data-v-4d90a324]{width:30px;height:30px;margin:auto 0}.msg-icon[data-v-4d90a324]{margin:auto 4px}\n/*图片消息*/.picture[data-v-4d90a324]{width:35%}.textarea[data-v-4d90a324]{background-color:#fff;width:96%;border-radius:%?10?%;height:24px;padding:%?10?% %?20?%}\n/*回复框*/.reply[data-v-4d90a324]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;position:fixed;bottom:0;width:100%;height:auto;border-top:1px solid #d7d7d7;background:#f5f5f5}.reply .voice-image[data-v-4d90a324]{width:25px;height:25px;margin-left:3%;position:relative}\n/*文本输入或语音录入*/.reply .opration-area[data-v-4d90a324]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;padding:8px}\n/*回复文本框*/.reply uni-input[data-v-4d90a324]{background:#fcfcfc;height:32px;border-radius:%?8?%;padding:0 %?16?%;font-size:16px}\n/*选取图片*/.reply .choose-image[data-v-4d90a324]{width:25px;height:25px;margin-right:3%}\n/*按住说话button*/.voice-button[data-v-4d90a324]{height:36px;color:#818181;font-size:14px;line-height:36px}\n/*悬浮提示框*/.hud-container[data-v-4d90a324]{position:fixed;width:150px;height:150px;left:50%;top:50%;margin-left:-75px;margin-top:-75px}\n/*背景层*/.hud-background[data-v-4d90a324]{position:absolute;width:100%;height:100%;background:#999;opacity:.8;z-index:11;border-radius:10px}\n/*悬浮框主体*/.hud-body[data-v-4d90a324]{position:relative;width:100%;height:100%;z-index:19;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}\n/*图标*/.hud-body uni-image[data-v-4d90a324]{margin-top:20px;width:80px;height:80px}\n/*文字*/.hud-body .tip[data-v-4d90a324]{color:#fff;text-align:center;width:90%;line-height:34px;margin:0 auto;margin-bottom:10px}.hud-body .warning[data-v-4d90a324]{background:#c33;border-radius:5px}[data-v-4d90a324]::-webkit-scrollbar{width:%?6?%;height:%?6?%;color:rgba(0,0,0,0)}\n/*定义滚动条轨道 内阴影+圆角*/[data-v-4d90a324]::-webkit-scrollbar-track{-webkit-box-shadow:inset 0 0 %?20?% rgba(0,0,0,0);border-radius:%?20?%;background-color:rgba(0,0,0,0)}\n/*定义滑块 内阴影+圆角*/[data-v-4d90a324]::-webkit-scrollbar-thumb{border-radius:%?20?%;-webkit-box-shadow:inset 0 0 %?20?% rgba(0,0,0,.2);background-color:rgba(0,0,0,.2)}',""])},"7e89":function(t,e,a){var n=a("6d8a");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var s=a("4f06").default;s("4c0d56d9",n,!0,{sourceMap:!1,shadowMode:!1})},"8bfb":function(t,e,a){"use strict";var n=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G"];function s(t){for(var e="",a=0;a<t;a++){var s=Math.ceil(17*Math.random());e+=n[s]}return e}t.exports={math:s}},"9ce0":function(t,e,a){"use strict";var n=a("7e89"),s=a.n(n);s.a},b031:function(t,e,a){"use strict";function n(t){var e,a,n,s,o,r,d,c,v,x=Array(),b=7,w=12,y=17,I=22,S=5,$=9,k=14,C=20,T=4,E=11,_=16,D=23,P=6,U=10,M=15,z=21;for(t=p(t),x=m(t),r=1732584193,d=4023233417,c=2562383102,v=271733878,e=0;e<x.length;e+=16)a=r,n=d,s=c,o=v,r=l(r,d,c,v,x[e+0],b,3614090360),v=l(v,r,d,c,x[e+1],w,3905402710),c=l(c,v,r,d,x[e+2],y,606105819),d=l(d,c,v,r,x[e+3],I,3250441966),r=l(r,d,c,v,x[e+4],b,4118548399),v=l(v,r,d,c,x[e+5],w,1200080426),c=l(c,v,r,d,x[e+6],y,2821735955),d=l(d,c,v,r,x[e+7],I,4249261313),r=l(r,d,c,v,x[e+8],b,1770035416),v=l(v,r,d,c,x[e+9],w,2336552879),c=l(c,v,r,d,x[e+10],y,4294925233),d=l(d,c,v,r,x[e+11],I,2304563134),r=l(r,d,c,v,x[e+12],b,1804603682),v=l(v,r,d,c,x[e+13],w,4254626195),c=l(c,v,r,d,x[e+14],y,2792965006),d=l(d,c,v,r,x[e+15],I,1236535329),r=u(r,d,c,v,x[e+1],S,4129170786),v=u(v,r,d,c,x[e+6],$,3225465664),c=u(c,v,r,d,x[e+11],k,643717713),d=u(d,c,v,r,x[e+0],C,3921069994),r=u(r,d,c,v,x[e+5],S,3593408605),v=u(v,r,d,c,x[e+10],$,38016083),c=u(c,v,r,d,x[e+15],k,3634488961),d=u(d,c,v,r,x[e+4],C,3889429448),r=u(r,d,c,v,x[e+9],S,568446438),v=u(v,r,d,c,x[e+14],$,3275163606),c=u(c,v,r,d,x[e+3],k,4107603335),d=u(d,c,v,r,x[e+8],C,1163531501),r=u(r,d,c,v,x[e+13],S,2850285829),v=u(v,r,d,c,x[e+2],$,4243563512),c=u(c,v,r,d,x[e+7],k,1735328473),d=u(d,c,v,r,x[e+12],C,2368359562),r=g(r,d,c,v,x[e+5],T,4294588738),v=g(v,r,d,c,x[e+8],E,2272392833),c=g(c,v,r,d,x[e+11],_,1839030562),d=g(d,c,v,r,x[e+14],D,4259657740),r=g(r,d,c,v,x[e+1],T,2763975236),v=g(v,r,d,c,x[e+4],E,1272893353),c=g(c,v,r,d,x[e+7],_,4139469664),d=g(d,c,v,r,x[e+10],D,3200236656),r=g(r,d,c,v,x[e+13],T,681279174),v=g(v,r,d,c,x[e+0],E,3936430074),c=g(c,v,r,d,x[e+3],_,3572445317),d=g(d,c,v,r,x[e+6],D,76029189),r=g(r,d,c,v,x[e+9],T,3654602809),v=g(v,r,d,c,x[e+12],E,3873151461),c=g(c,v,r,d,x[e+15],_,530742520),d=g(d,c,v,r,x[e+2],D,3299628645),r=f(r,d,c,v,x[e+0],P,4096336452),v=f(v,r,d,c,x[e+7],U,1126891415),c=f(c,v,r,d,x[e+14],M,2878612391),d=f(d,c,v,r,x[e+5],z,4237533241),r=f(r,d,c,v,x[e+12],P,1700485571),v=f(v,r,d,c,x[e+3],U,2399980690),c=f(c,v,r,d,x[e+10],M,4293915773),d=f(d,c,v,r,x[e+1],z,2240044497),r=f(r,d,c,v,x[e+8],P,1873313359),v=f(v,r,d,c,x[e+15],U,4264355552),c=f(c,v,r,d,x[e+6],M,2734768916),d=f(d,c,v,r,x[e+13],z,1309151649),r=f(r,d,c,v,x[e+4],P,4149444226),v=f(v,r,d,c,x[e+11],U,3174756917),c=f(c,v,r,d,x[e+2],M,718787259),d=f(d,c,v,r,x[e+9],z,3951481745),r=i(r,a),d=i(d,n),c=i(c,s),v=i(v,o);return h(r)+h(d)+h(c)+h(v)}function s(t,e){return t<<e|t>>>32-e}function i(t,e){var a,n,s,i,o;return s=2147483648&t,i=2147483648&e,a=1073741824&t,n=1073741824&e,o=(1073741823&t)+(1073741823&e),a&n?2147483648^o^s^i:a|n?1073741824&o?3221225472^o^s^i:1073741824^o^s^i:o^s^i}function o(t,e,a){return t&e|~t&a}function r(t,e,a){return t&a|e&~a}function d(t,e,a){return t^e^a}function c(t,e,a){return e^(t|~a)}function l(t,e,a,n,r,d,c){return t=i(t,i(i(o(e,a,n),r),c)),i(s(t,d),e)}function u(t,e,a,n,o,d,c){return t=i(t,i(i(r(e,a,n),o),c)),i(s(t,d),e)}function g(t,e,a,n,o,r,c){return t=i(t,i(i(d(e,a,n),o),c)),i(s(t,r),e)}function f(t,e,a,n,o,r,d){return t=i(t,i(i(c(e,a,n),o),d)),i(s(t,r),e)}function m(t){var e,a=t.length,n=a+8,s=(n-n%64)/64,i=16*(s+1),o=Array(i-1),r=0,d=0;while(d<a)e=(d-d%4)/4,r=d%4*8,o[e]=o[e]|t.charCodeAt(d)<<r,d++;return e=(d-d%4)/4,r=d%4*8,o[e]=o[e]|128<<r,o[i-2]=a<<3,o[i-1]=a>>>29,o}function h(t){var e,a,n="",s="";for(a=0;a<=3;a++)e=t>>>8*a&255,s="0"+e.toString(16),n+=s.substr(s.length-2,2);return n}function p(t){for(var e="",a=0;a<t.length;a++){var n=t.charCodeAt(a);n<128?e+=String.fromCharCode(n):n>127&&n<2048?(e+=String.fromCharCode(n>>6|192),e+=String.fromCharCode(63&n|128)):(e+=String.fromCharCode(n>>12|224),e+=String.fromCharCode(n>>6&63|128),e+=String.fromCharCode(63&n|128))}return e}t.exports={md5:n}},c603:function(t,e,a){"use strict";a.r(e);var n=a("00d3"),s=a.n(n);for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);e["default"]=s.a},f89e:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("v-uni-scroll-view",{staticClass:"message-list",style:{height:t.scroll_height+"px"},attrs:{"upper-threshold":"20","scroll-into-view":t.toView,"scroll-top":t.scrollTop,"scroll-y":"isScrollY",focus:t.mode,"enable-back-to-top":"true"},on:{scroll:function(e){e=t.$handleEvent(e),t.bindscroll(e)}}},[a("v-uni-view",{staticClass:"loding-img"},[t.noData?a("v-uni-image",{attrs:{src:"/static/images/loading.gif"}}):t._e(),t.noData?t._e():a("v-uni-view",[t._v("没有更多数据了")])],1),a("v-uni-view",{attrs:{id:"hideview"}},t._l(t.HideData,function(e,n){return a("v-uni-view",{key:n,staticClass:"row"},[e.timeInterval&&""!=e.timeInterval?a("v-uni-view",{staticClass:"datetime"},[t._v(t._s(e.timeInterval))]):t._e(),a("v-uni-view",{staticClass:"body",style:{"flex-flow":e.fromUserId!=t.userId?"row":"row-reverse"}},[a("v-uni-view",{staticClass:"avatar-container"},[a("v-uni-image",{staticClass:"avatar",attrs:{src:e.fromUserId!=t.userId?t.fromUserPhoto:t.toUserPhoto}})],1),"TEXT"==e.smsType?[a("v-uni-view",{staticClass:"triangle",style:e.fromUserId==t.userId?"right: 110rpx; background: #7ECB4B":"left: 110rpx;"}),a("v-uni-view",{staticClass:"msg-content",style:e.fromUserId==t.userId?"background: #7ECB4B;left:5rpx;":""},["TEXT"==e.smsType?a("v-uni-text",{staticClass:"msg-text"},[t._v(t._s(e.content))]):t._e(),"VOICE"==e.smsType?a("v-uni-audio",{staticStyle:{width:"100px",height:"20px"},attrs:{"data-id":"audio_"+n,src:e.content},on:{click:function(e){e=t.$handleEvent(e),t.audioPlay(e)}}}):t._e()],1)]:t._e(),"IMAGE"==e.smsType?a("v-uni-image",{staticClass:"picture",attrs:{src:e.content,mode:"widthFix","data-src":e.content},on:{click:function(e){e=t.$handleEvent(e),t.preview(e)}}}):t._e(),e.fromUserId==t.userId&&e.smsStatus?[10==e.smsStatus?a("v-uni-image",{staticClass:"msg-img",attrs:{src:"/static/images/loading.gif"}}):t._e(),20==e.smsStatus?a("v-uni-icon",{staticClass:"msg-icon",attrs:{"data-key":n,type:"warn",size:"22"},on:{click:function(e){e=t.$handleEvent(e),t.retry(e)}}}):t._e()]:t._e()],2),e.fromUserId==t.userId&&e.smsStatus?[40==e.smsStatus?a("v-uni-text",{staticClass:"msg-status"},[t._v("已送达")]):t._e(),50==e.smsStatus?a("v-uni-text",{staticClass:"msg-status msg-read"},[t._v("已读")]):t._e()]:t._e()],2)}),1),a("v-uni-view",t._l(t.EventData,function(e,n){return a("v-uni-view",{key:n,staticClass:"row",attrs:{id:"row_"+n}},[e.timeInterval&&""!=e.timeInterval?a("v-uni-view",{staticClass:"datetime"},[t._v(t._s(e.timeInterval))]):t._e(),a("v-uni-view",{staticClass:"body",style:{"flex-flow":e.fromUserId!=t.userId?"row":"row-reverse"}},[a("v-uni-view",{staticClass:"avatar-container"},[a("v-uni-image",{staticClass:"avatar",attrs:{src:e.fromUserId!=t.userId?t.fromUserPhoto:t.toUserPhoto}})],1),"TEXT"==e.smsType?[a("v-uni-view",{staticClass:"triangle",style:e.fromUserId==t.userId?"right: 110rpx; background: #7ECB4B":"left: 110rpx;"}),a("v-uni-view",{staticClass:"msg-content",style:e.fromUserId==t.userId?"background: #7ECB4B;left:5rpx;":""},["TEXT"==e.smsType?a("v-uni-text",{staticClass:"msg-text"},[t._v(t._s(e.content))]):t._e(),"VOICE"==e.smsType?a("v-uni-audio",{staticStyle:{width:"100px",height:"20px"},attrs:{"data-id":"audio_"+n,src:e.content},on:{click:function(e){e=t.$handleEvent(e),t.audioPlay(e)}}}):t._e()],1)]:t._e(),"IMAGE"==e.smsType?a("v-uni-image",{staticClass:"picture",attrs:{src:e.content,mode:"widthFix","data-src":e.content},on:{click:function(e){e=t.$handleEvent(e),t.preview(e)}}}):t._e(),e.fromUserId==t.userId&&e.smsStatus?[10==e.smsStatus?a("v-uni-image",{staticClass:"msg-img",attrs:{src:"/static/images/loading.gif"}}):t._e(),20==e.smsStatus?a("v-uni-icon",{staticClass:"msg-icon",attrs:{"data-key":n,type:"warn",size:"22"},on:{click:function(e){e=t.$handleEvent(e),t.retry(e)}}}):t._e()]:t._e()],2),e.fromUserId==t.userId&&e.smsStatus?[40==e.smsStatus?a("v-uni-text",{staticClass:"msg-status"},[t._v("已送达")]):t._e(),50==e.smsStatus?a("v-uni-text",{staticClass:"msg-status msg-read"},[t._v("已读")]):t._e()]:t._e()],2)}),1)],1),t.status!=t.state.normal?a("v-uni-view",{staticClass:"hud-container"},[a("v-uni-view",{staticClass:"hud-background"}),a("v-uni-view",{staticClass:"hud-body"},[a("v-uni-image",{attrs:{src:"./images/mic.png"}}),a("v-uni-view",{staticClass:"tip",class:t.status==t.state.cancel?"warning":""},[t._v(t._s(t.tips[t.status]))])],1)],1):t._e(),a("v-uni-view",{staticClass:"height100"}),a("v-uni-view",{staticClass:"reply"},[a("v-uni-view",{staticClass:"opration-area ply"},[t.mode?a("v-uni-input",{attrs:{"confirm-hold":"true",type:"text","confirm-type":"send"},on:{focus:function(e){e=t.$handleEvent(e),t.inputShowed(e)},confirm:function(e){e=t.$handleEvent(e),t.reply(e)}},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}):t._e()],1),a("v-uni-image",{staticClass:"choose-image ply",attrs:{src:"/static/images/image.png"},on:{click:function(e){e=t.$handleEvent(e),t.chooseImage(e)}}})],1)],1)},s=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return s})}}]);