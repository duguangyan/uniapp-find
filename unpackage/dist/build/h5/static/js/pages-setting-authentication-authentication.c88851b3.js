(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-setting-authentication-authentication"],{1472:function(a,e,t){"use strict";var i=t("932d"),n=t.n(i);n.a},4413:function(a,e,t){"use strict";t.r(e);var i=t("66f4"),n=t.n(i);for(var o in i)"default"!==o&&function(a){t.d(e,a,function(){return i[a]})}(o);e["default"]=n.a},"66f4":function(a,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(t("e378")),n=o(t("0089"));function o(a){return a&&a.__esModule?a:{default:a}}var r={data:function(){return{title:"用户认证",VerificationCodeText:"获取验证码",code_id:"",id:"",companyName:"",userType:0,userStatus:0,status_label:"",remark:"",showCon:!1,navArr:[{name:"个人用户",imgUrl:"https://static.yidap.com/miniapp/o2o/imgs/ic_certification_personl_no_select.png",activeImg:"https://static.yidap.com/miniapp/o2o/imgs/ic_certification_personl_select.png"},{name:"企业用户",imgUrl:"https://static.yidap.com/miniapp/o2o/imgs/ic_certification_company_no_select.png",activeImg:"https://static.yidap.com/miniapp/o2o/imgs/ic_certification_company_select.png"}],navIndex:0,bgImg:["","",""],arr:[{name:"姓名:",value:"",placeholder:"请输入您的姓名"},{name:"联系电话:",value:"",placeholder:"请输入您的手机"},{name:"验证码:",value:"",placeholder:"请输入验证码"},{name:"详细地址:",value:"",placeholder:"请选择地区"},{name:"门牌号:",value:"",placeholder:"街道、楼牌等"},{name:"身份证号码:",value:"",placeholder:"请输入您的身份证号码"}],ngImgTextArr:[{text:"请上传身份证正面(信息页)",img:"https://static.yidap.com/miniapp/o2o/imgs/ic_certifcation_card_back.png"},{text:"请上传身份证反面(国徽页)",img:"https://static.yidap.com/miniapp/o2o/imgs/ic_certifcation_card_back.png"},{text:"请上传营业执照正面",img:"https://static.yidap.com/miniapp/o2o/imgs/ic_certifcation_card_back.png"}]}},onLoad:function(a){var e=this;if(this.$data.userType=uni.getStorageSync("userType"),1==this.$data.userType||2==this.$data.userType)return!1;n.default.auditApply({}).then(function(a){if(200==a.code||0==a.code){e.$data.userStatus=a.data.status;var t=a.data;if(1==e.$data.userType||2==e.$data.userType?1==e.$data.userStatus?e.$data.arr=[{name:"姓名:",value:"",placeholder:"请输入您的姓名"},{name:"联系电话:",value:"",placeholder:"请输入您的手机"},{name:"详细地址:",value:"",placeholder:"请选择地区"},{name:"门牌号:",value:"",placeholder:"街道、楼牌等"},{name:"身份证号码:",value:"",placeholder:"请输入您的身份证号码"}]:e.$data.arr=[{name:"姓名:",value:"",placeholder:"请输入您的姓名"},{name:"联系电话:",value:"",placeholder:"请输入您的手机"},{name:"验证码:",value:"",placeholder:"请输入验证码"},{name:"详细地址:",value:"",placeholder:"请选择地区"},{name:"门牌号:",value:"",placeholder:"街道、楼牌等"},{name:"身份证号码:",value:"",placeholder:"请输入您的身份证号码"}]:1==t.type?e.$data.arr=[{name:"姓名:",value:"",placeholder:"请输入您的姓名"},{name:"联系电话:",value:"",placeholder:"请输入您的手机"},{name:"详细地址:",value:"",placeholder:"请选择地区"},{name:"门牌号:",value:"",placeholder:"街道、楼牌等"},{name:"身份证号码:",value:"",placeholder:"请输入您的身份证号码"}]:e.$data.arr=[{name:"企业法人:",value:"",placeholder:"请输入企业法人"},{name:"法人电话:",value:"",placeholder:"请输入您的企业法人电话"},{name:"详细地址:",value:"",placeholder:"请选择地区"},{name:"门牌号:",value:"",placeholder:"街道、楼牌等"},{name:"营业执照编号:",value:"",placeholder:"请输入您的营业执照编号"}],a.data.status>0){e.$data.userAuthentication=a.data;var i=a.data;i.id&&(e.$data.id=i.id),e.$data.status_label=i.status_label,e.$data.remark=i.remark,e.$data.navIndex=i.type-1,1==e.$data.navIndex&&(e.$data.companyName=i.company),e.$data.arr[0].value=i.consignee,e.$data.arr[1].value=i.mobile,e.$data.arr[2].value=i.address.split(",")[0]||"",e.$data.arr[3].value=i.address.split(",")[1]||"",2==e.$data.userType||3==e.$data.userType?(e.$data.arr[4].value="",e.$data.arr[5].value=i.id_card_no):e.$data.arr[4].value=i.id_card_no,0!=e.$data.userStatus&&(1==i.type?(e.$data.ngImgTextArr[0].img=i.id_card_front,e.$data.ngImgTextArr[1].img=i.id_card_back,e.$data.bgImg[0]=i.id_card_front,e.$data.bgImg[1]=i.id_card_back):(e.$data.ngImgTextArr[2].img=i.id_card_front,e.$data.bgImg[2]=i.id_card_front))}}})},onShow:function(){0==this.$data.userType||3==this.$data.userType?uni.setNavigationBarTitle({title:"用户认证"}):1==this.$data.userType?uni.setNavigationBarTitle({title:"认证找料员"}):2==this.$data.userType&&uni.setNavigationBarTitle({title:"认证配送员"})},methods:{getVerificationCode:function(){var a=this;if(""==this.$data.arr[1].value)return i.default.successTips("请填写手机号码"),!1;n.default.regSMS({method:"POST",data:{mobile:this.$data.arr[1].value}}).then(function(e){200!=e.code&&0!=e.code||(a.$data.code_id=e.data.id,a.$data.VerificationCodeText="重新发送")}).catch(function(a){i.default.errorTips(a.msg||a.message)})},changeModalCancel:function(){this.$data.showCon=!1},onFocus:function(a){if(2==this.$data.userStatus)return!1;console.log(a);var e=this,t=uni.getStorageSync("userType");0==t||3==t?2==a&&uni.chooseLocation({success:function(a){console.log("位置名称："+a.name),console.log("详细地址："+a.address),console.log("纬度："+a.latitude),console.log("经度："+a.longitude),0==e.$data.userType||3==e.$data.userType?(e.$data.arr[2].value=a.address,e.$data.arr[3].value=a.name):(e.$data.arr[3].value=a.address,e.$data.arr[4].value=a.name)},fail:function(a){i.default.errorTips("获取地图定位失败："+a.errMsg),console.log(a),uni.getSetting({success:function(a){a.authSetting["scope.userLocation"]||(e.$data.showCon=!0)}})}}):3==a&&uni.chooseLocation({success:function(a){console.log("位置名称："+a.name),console.log("详细地址："+a.address),console.log("纬度："+a.latitude),console.log("经度："+a.longitude),0==e.$data.userType||3==e.$data.userType?(e.$data.arr[2].value=a.address,e.$data.arr[3].value=a.name):(e.$data.arr[3].value=a.address,e.$data.arr[4].value=a.name)},fail:function(a){i.default.errorTips("获取地图定位失败："+a.errMsg),console.log(a),uni.getSetting({success:function(a){a.authSetting["scope.userLocation"]||(e.$data.showCon=!0)}})}})},navCheck:function(a){if(2==this.$data.userStatus)return!1;this.$data.navIndex=a,0==a?(this.$data.arr[0].name="姓名:",this.$data.arr[1].name="联系电话:",this.$data.arr[4].name="身份证号码:",this.$data.arr[0].placeholder="请输入您的姓名",this.$data.arr[1].placeholder="请输入您的联系电话",this.$data.arr[4].placeholder="请输入您的身份证号码"):(this.$data.arr[0].name="企业法人:",this.$data.arr[1].name="法人电话:",this.$data.arr[4].name="营业执照编号:",this.$data.arr[0].placeholder="请输入您的企业法人",this.$data.arr[1].placeholder="请输入您的企业法人电话",this.$data.arr[4].placeholder="请输入您的营业执照编号")},checkImg:function(a){if(2==this.$data.userStatus)return!1;var e=this;uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(t){var o=wx.getStorageSync("access_token")||"",r={file:"[object Object]",type:"big"},s=Date.parse(new Date);r.timestamp=s,r.sign=i.default.makeSign(n.default.apiUrl+"/api/upload",r),r.deviceId="wx",r.platformType="2",r.versionCode="4.0";wx.uploadFile({url:"".concat(n.default.apiUrl,"/api/upload"),filePath:t.tempFilePaths[0],name:"file",header:{"content-type":"multipart/form-data",Accept:"application/json",Authorization:"Bearer ".concat(o)},formData:r,success:function(t){console.log("图片上传"),console.log(t);var n=JSON.parse(t.data);if(200===n.code||0===n.code){var o=JSON.parse(t.data).data;e.$data.ngImgTextArr[a].img=o,e.$data.bgImg[a]=o,i.default.successTips("图片上传成功")}else i.default.errorTips("上传错误")},fail:function(a){console.log(a)},complete:function(){}})}})},save:function(){var a=this;if(!i.default.vailPhone(this.$data.arr[1].value))return i.default.errorTips("请输入正确的手机号"),!1;if(0==this.$data.navIndex){if(""==this.$data.bgImg[0]||""==this.$data.bgImg[1]){if(""==this.$data.bgImg[0])return i.default.errorTips("请上传身份证正面照"),!1;if(""==this.$data.bgImg[1])return i.default.errorTips("请上传身份证背面照"),!1}}else if(""==this.$data.bgImg[2])return i.default.errorTips("请上传营业执照"),!1;var e="";if(1==this.$data.userType||2==this.$data.userType){if(""==this.$data.code_id)return i.default.errorTips("请输入验证码"),!1;e={from:1,type:this.$data.navIndex+1,consignee:this.$data.arr[0].value,mobile:this.$data.arr[1].value,address:a.$data.arr[3].value+","+a.$data.arr[4].value,id_card_no:this.$data.arr[5].value,id_card_back:this.$data.bgImg[1],id_card_front:this.$data.bgImg[0]}}else e={from:1,type:this.$data.navIndex+1,consignee:this.$data.arr[0].value,mobile:this.$data.arr[1].value,address:a.$data.arr[2].value+","+a.$data.arr[3].value,id_card_no:this.$data.arr[4].value,id_card_back:this.$data.bgImg[1],id_card_front:this.$data.bgImg[0]},1==this.$data.navIndex&&(e.company=this.$data.companyName,e.id_card_front=this.$data.bgImg[2]);1==a.$data.navIndex&&(e.id_card_front=this.$data.bgImg[2]),""!=this.$data.id&&(e.id=this.$data.id),0==this.$data.userType||3==this.$data.userType?n.default.auditApply({method:"POST",data:e}).then(function(a){200==a.code||0==a.code?(i.default.successTips("提交审核成功"),setTimeout(function(){uni.navigateBack({delta:1})},1e3)):i.default.errorTips(a.msg)}).catch(function(a){i.default.errorTips(a.msg||a.message)}):1==this.$data.userType?(e.code=this.$data.arr[2].value,e.id=this.$data.code_id,e.type=1,n.default.staffAudit({method:"POST",data:e}).then(function(a){200==a.code||0==a.code?(i.default.successTips("提交审核成功"),setTimeout(function(){uni.reLaunch({url:"../../index/index"})},1e3)):1==a.code?(i.default.successTips(a.msg),uni.setStorageSync("isExamine1",1),setTimeout(function(){uni.reLaunch({url:"../../index/index"})},1e3)):i.default.successTips(a.msg)}).catch(function(a){i.default.errorTips(a.msg||a.message),1==a.code&&(uni.setStorageSync("isExamine1",1),setTimeout(function(){uni.reLaunch({url:"../../index/index"})},1e3))})):2==this.$data.userType&&(e.code=this.$data.arr[2].value,e.id=this.$data.code_id,e.type=2,n.default.staffAudit({method:"POST",data:e}).then(function(a){200==a.code||0==a.code?(i.default.successTips("提交审核成功"),setTimeout(function(){uni.reLaunch({url:"../../index/index"})},1e3)):1==a.code?(uni.setStorageSync("isExamine1",1),setTimeout(function(){uni.reLaunch({url:"../../index/index"})},1e3)):i.default.errorTips(a.msg)}).catch(function(a){i.default.errorTips(a.msg||a.message),uni.setStorageSync("isExamine2",1),setTimeout(function(){uni.reLaunch({url:"../../index/index"})},1e3)}))}}};e.default=r},"68d0":function(a,e,t){"use strict";var i=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("v-uni-view",{staticClass:"wx_content"},[t("v-uni-view",{staticClass:"authentication"},[0==a.userType||3==a.userType?t("v-uni-view",{staticClass:"nav flex"},[a._l(a.navArr,function(e,i){return t("v-uni-view",{key:i,staticClass:"flex-1",on:{click:function(e){e=a.$handleEvent(e),a.navCheck(i)}}},[t("v-uni-image",{attrs:{src:a.navIndex==i?e.activeImg:e.imgUrl}}),t("v-uni-view",[a._v(a._s(e.name))])],1)}),t("v-uni-view",{staticClass:"line"})],2):a._e(),t("v-uni-view",{staticClass:"input"},[1==a.navIndex?t("v-uni-view",{staticClass:"li cf"},[t("v-uni-view",{staticClass:"name fll"},[a._v("企业名称")]),t("v-uni-view",{staticClass:"value fll cf"},[t("v-uni-input",{attrs:{type:"text",placeholder:"请输入企业名称"},model:{value:a.companyName,callback:function(e){a.companyName=e},expression:"companyName"}})],1)],1):a._e(),a._l(a.arr,function(e,i){return t("v-uni-view",{key:i,staticClass:"li cf"},[t("v-uni-view",{staticClass:"name fll"},[a._v(a._s(e.name))]),t("v-uni-view",{staticClass:"value fll cf"},[1!=a.userType&&2!=a.userType||5==i?a._e():t("v-uni-input",{attrs:{disabled:2==a.userStatus,type:"text",placeholder:e.placeholder},on:{click:function(e){e.stopPropagation(),e=a.$handleEvent(e),a.onFocus(i)}},model:{value:e.value,callback:function(t){a.$set(e,"value",t)},expression:"item.value"}}),0!=a.userType&&3!=a.userType||4==i?a._e():t("v-uni-input",{attrs:{disabled:2==a.userStatus,type:"text",placeholder:e.placeholder},on:{click:function(e){e.stopPropagation(),e=a.$handleEvent(e),a.onFocus(i)}},model:{value:e.value,callback:function(t){a.$set(e,"value",t)},expression:"item.value"}}),1!=a.userType&&2!=a.userType||5!=i?a._e():t("v-uni-input",{attrs:{disabled:2==a.userStatus,type:"idcard",placeholder:e.placeholder},on:{click:function(e){e.stopPropagation(),e=a.$handleEvent(e),a.onFocus(i)}},model:{value:e.value,callback:function(t){a.$set(e,"value",t)},expression:"item.value"}}),0!=a.userType&&3!=a.userType||4!=i||0!=a.navIndex?a._e():t("v-uni-input",{attrs:{disabled:2==a.userStatus,type:"idcard",placeholder:e.placeholder},on:{click:function(e){e.stopPropagation(),e=a.$handleEvent(e),a.onFocus(i)}},model:{value:e.value,callback:function(t){a.$set(e,"value",t)},expression:"item.value"}}),0!=a.userType&&3!=a.userType||4!=i||1!=a.navIndex?a._e():t("v-uni-input",{attrs:{disabled:2==a.userStatus,type:"text",placeholder:e.placeholder},on:{click:function(e){e.stopPropagation(),e=a.$handleEvent(e),a.onFocus(i)}},model:{value:e.value,callback:function(t){a.$set(e,"value",t)},expression:"item.value"}}),1!=a.userType&&2!=a.userType||2!=i||1==a.userStatus?a._e():t("v-uni-view",{staticClass:"VerificationCode flr",on:{click:function(e){e.stopPropagation(),e=a.$handleEvent(e),a.getVerificationCode(e)}}},[a._v(a._s(a.VerificationCodeText))])],1)],1)})],2),t("v-uni-view",a._l(a.ngImgTextArr,function(e,i){return(0==a.navIndex?i<2:i>=2)?t("v-uni-view",{key:i,staticClass:"image"},[t("v-uni-image",{attrs:{src:e.img},on:{click:function(e){e=a.$handleEvent(e),a.checkImg(i)}}}),""==a.bgImg[i]?t("v-uni-view",{staticClass:"bgszie",on:{click:function(e){e=a.$handleEvent(e),a.checkImg(i)}}},[a._v("+")]):a._e(),t("v-uni-view",{staticClass:"text"},[a._v(a._s(e.text))])],1):a._e()}),1),0!=a.userStatus?t("v-uni-view",{staticClass:"info text-red cf"},[t("v-uni-view",{staticClass:"fll"},[a._v(a._s(a.status_label||""))]),t("v-uni-view",{staticClass:"flr mgr-20"},[a._v(a._s(a.remark||""))])],1):a._e(),0==a.userStatus?t("v-uni-view",{staticClass:"btn-warp"},[t("v-uni-view",{staticClass:"btn",on:{click:function(e){e=a.$handleEvent(e),a.save(e)}}},[a._v("提交")])],1):a._e(),3==a.userStatus||1==a.userStatus?t("v-uni-view",{staticClass:"btn-warp"},[t("v-uni-view",{staticClass:"btn",on:{click:function(e){e=a.$handleEvent(e),a.save(e)}}},[a._v("重新提交")])],1):a._e()],1),a.showCon?t("v-uni-view",{staticClass:"modal-mask",on:{click:function(e){e=a.$handleEvent(e),a.changeModalCancel(e)}}},[t("v-uni-view",{staticClass:"modal-dialog"},[t("v-uni-view",{staticClass:"modal-title"},[a._v("温馨提示")]),t("v-uni-view",{staticClass:"modal-content"},[a._v("获取定位失败，请前往设置打开定位权限")]),t("v-uni-view",{staticClass:"modal-footer"},[t("v-uni-view",{staticClass:"btn-cancel",on:{click:function(e){e=a.$handleEvent(e),a.changeModalCancel(e)}}},[a._v("取消")]),t("v-uni-button",{staticClass:"btn-confirm button-on-view",staticStyle:{padding:"0rpx"},attrs:{"open-type":"openSetting"},on:{click:function(e){e=a.$handleEvent(e),a.changeModalCancel(e)}}},[a._v("设置")])],1)],1)],1):a._e()],1)},n=[];t.d(e,"a",function(){return i}),t.d(e,"b",function(){return n})},"932d":function(a,e,t){var i=t("cf9e");"string"===typeof i&&(i=[[a.i,i,""]]),i.locals&&(a.exports=i.locals);var n=t("4f06").default;n("1c7bd380",i,!0,{sourceMap:!1,shadowMode:!1})},cf9e:function(a,e,t){e=a.exports=t("2350")(!1),e.push([a.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.VerificationCode[data-v-3c4e4026]{width:%?160?%;text-align:center;border:%?1?% solid #f29800;color:#f29800;position:absolute;right:%?10?%;top:%?10?%;z-index:9999;height:%?60?%;line-height:%?60?%;color:#fff;background:#f29800}.info[data-v-3c4e4026]{line-height:%?100?%;padding-left:%?30?%;border-top:%?20?% solid #f4f4f4;background:#fff}.wx_content[data-v-3c4e4026]{background:#f4f4f4;height:100%}.height160[data-v-3c4e4026]{height:%?140?%}.authentication[data-v-3c4e4026]{background:#fff;margin-bottom:%?240?%}.authentication .btn-warp[data-v-3c4e4026]{background:#fff;padding-bottom:%?100?%}.authentication .btn-warp .btn[data-v-3c4e4026]{height:%?80?%;line-height:%?80?%;text-align:center;background:orange;color:#fff;width:%?650?%;position:relative;left:%?40?%;top:%?40?%;bottom:%?40?%;border-radius:%?10?%}.authentication .image[data-v-3c4e4026]{width:100%;position:relative}.authentication .image uni-image[data-v-3c4e4026]{width:%?400?%;height:%?240?%;margin-left:%?175?%}.authentication .image .bgszie[data-v-3c4e4026]{position:absolute;font-size:%?140?%;top:%?20?%;left:%?320?%;z-index:9999;color:#fff}.authentication .image .text[data-v-3c4e4026]{text-align:center;line-height:%?60?%;padding-bottom:%?10?%}.authentication .input[data-v-3c4e4026]{margin:%?20?% %?30?%}.authentication .input .li[data-v-3c4e4026]{border-bottom:%?1?% solid #eee;height:%?80?%;line-height:%?80?%}.authentication .input .li .name[data-v-3c4e4026]{width:%?200?%}.authentication .input .li .value[data-v-3c4e4026]{width:%?490?%;position:relative}.authentication .input .li .value uni-input[data-v-3c4e4026]{height:%?80?%;line-height:%?80?%}.authentication .nav[data-v-3c4e4026]{position:relative;border-bottom:%?20?% solid #eee;padding-bottom:%?40?%}.authentication .nav uni-image[data-v-3c4e4026]{width:%?80?%;height:%?80?%;margin:%?10?% auto;margin-top:%?40?%}.authentication .nav .flex-1[data-v-3c4e4026]{text-align:center}.authentication .nav .line[data-v-3c4e4026]{position:absolute;height:60%;width:%?1?%;background:#eee;left:%?375?%;top:%?50?%}.modal-mask[data-v-3c4e4026]{width:100%;height:100%;position:fixed;top:0;left:0;background-color:rgba(0,0,0,.5);overflow:hidden;z-index:9999;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}.modal-dialog[data-v-3c4e4026]{width:%?540?%;overflow:hidden;z-index:9999;background:#f9f9f9;border-radius:%?5?%}.modal-title[data-v-3c4e4026]{padding-top:%?30?%;font-size:%?32?%;color:#030303;text-align:center}.modal-content[data-v-3c4e4026]{padding:%?20?% %?32?%;font-size:%?28?%}.modal-footer[data-v-3c4e4026]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;height:%?86?%;border-top:1px solid #dedede;font-size:%?34?%;line-height:%?86?%}.btn-cancel[data-v-3c4e4026]{width:50%;color:#abb4bd;text-align:center;border-right:1px solid #dedede}.btn-confirm[data-v-3c4e4026]{width:50%;color:#6fb64b;text-align:center;font-weight:500}',""])},fefa:function(a,e,t){"use strict";t.r(e);var i=t("68d0"),n=t("4413");for(var o in n)"default"!==o&&function(a){t.d(e,a,function(){return n[a]})}(o);t("1472");var r=t("2877"),s=Object(r["a"])(n["default"],i["a"],i["b"],!1,null,"3c4e4026",null);e["default"]=s.exports}}]);