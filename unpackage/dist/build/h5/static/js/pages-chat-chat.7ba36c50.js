(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-chat-chat"],{"00d3":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("b031")),n=s(i("8bfb")),o=s(i("e378")),r=s(i("0089")),l=s(i("f6ce"));function s(t){return t&&t.__esModule?t:{default:t}}var c={data:function(){return{textMsg:"",scrollAnimation:!1,scrollTop:0,scrollToView:"",msgList:[],hideMsgList:[],msgImgList:[],fromUserId:0,toUserId:0,toAvatarPath:"",fromAvatarPath:"",userInfoId:"",toupperTop:!0,currentPage:1,nextPage:!0,msgTotal:0,isVoice:!1,voiceTis:"按住 说话",recordTis:"手指上滑 取消发送",recording:!1,willStop:!1,initPoint:{identifier:0,Y:0},recordTimer:null,recordLength:0,AUDIO:uni.createInnerAudioContext(),playMsgid:null,VoiceTimer:null,showEmji:"",emojiList:[[{url:"100.gif",alt:"[微笑]"},{url:"101.gif",alt:"[伤心]"},{url:"102.gif",alt:"[美女]"},{url:"103.gif",alt:"[发呆]"},{url:"104.gif",alt:"[墨镜]"},{url:"105.gif",alt:"[哭]"},{url:"106.gif",alt:"[羞]"},{url:"107.gif",alt:"[哑]"},{url:"108.gif",alt:"[睡]"},{url:"109.gif",alt:"[哭]"},{url:"110.gif",alt:"[囧]"},{url:"111.gif",alt:"[怒]"},{url:"112.gif",alt:"[调皮]"},{url:"113.gif",alt:"[笑]"},{url:"114.gif",alt:"[惊讶]"},{url:"115.gif",alt:"[难过]"},{url:"116.gif",alt:"[酷]"},{url:"117.gif",alt:"[汗]"},{url:"118.gif",alt:"[抓狂]"},{url:"119.gif",alt:"[吐]"},{url:"120.gif",alt:"[笑]"},{url:"121.gif",alt:"[快乐]"},{url:"122.gif",alt:"[奇]"},{url:"123.gif",alt:"[傲]"}],[{url:"124.gif",alt:"[饿]"},{url:"125.gif",alt:"[累]"},{url:"126.gif",alt:"[吓]"},{url:"127.gif",alt:"[汗]"},{url:"128.gif",alt:"[高兴]"},{url:"129.gif",alt:"[闲]"},{url:"130.gif",alt:"[努力]"},{url:"131.gif",alt:"[骂]"},{url:"132.gif",alt:"[疑问]"},{url:"133.gif",alt:"[秘密]"},{url:"134.gif",alt:"[乱]"},{url:"135.gif",alt:"[疯]"},{url:"136.gif",alt:"[哀]"},{url:"137.gif",alt:"[鬼]"},{url:"138.gif",alt:"[打击]"},{url:"139.gif",alt:"[bye]"},{url:"140.gif",alt:"[汗]"},{url:"141.gif",alt:"[抠]"},{url:"142.gif",alt:"[鼓掌]"},{url:"143.gif",alt:"[糟糕]"},{url:"144.gif",alt:"[恶搞]"},{url:"145.gif",alt:"[什么]"},{url:"146.gif",alt:"[什么]"},{url:"147.gif",alt:"[累]"}],[{url:"148.gif",alt:"[看]"},{url:"149.gif",alt:"[难过]"},{url:"150.gif",alt:"[难过]"},{url:"151.gif",alt:"[坏]"},{url:"152.gif",alt:"[亲]"},{url:"153.gif",alt:"[吓]"},{url:"154.gif",alt:"[可怜]"},{url:"155.gif",alt:"[刀]"},{url:"156.gif",alt:"[水果]"},{url:"157.gif",alt:"[酒]"},{url:"158.gif",alt:"[篮球]"},{url:"159.gif",alt:"[乒乓]"},{url:"160.gif",alt:"[咖啡]"},{url:"161.gif",alt:"[美食]"},{url:"162.gif",alt:"[动物]"},{url:"163.gif",alt:"[鲜花]"},{url:"164.gif",alt:"[枯]"},{url:"165.gif",alt:"[唇]"},{url:"166.gif",alt:"[爱]"},{url:"167.gif",alt:"[分手]"},{url:"168.gif",alt:"[生日]"},{url:"169.gif",alt:"[电]"},{url:"170.gif",alt:"[炸弹]"},{url:"171.gif",alt:"[刀子]"}],[{url:"172.gif",alt:"[足球]"},{url:"173.gif",alt:"[瓢虫]"},{url:"174.gif",alt:"[翔]"},{url:"175.gif",alt:"[月亮]"},{url:"176.gif",alt:"[太阳]"},{url:"177.gif",alt:"[礼物]"},{url:"178.gif",alt:"[抱抱]"},{url:"179.gif",alt:"[拇指]"},{url:"180.gif",alt:"[贬低]"},{url:"181.gif",alt:"[握手]"},{url:"182.gif",alt:"[剪刀手]"},{url:"183.gif",alt:"[抱拳]"},{url:"184.gif",alt:"[勾引]"},{url:"185.gif",alt:"[拳头]"},{url:"186.gif",alt:"[小拇指]"},{url:"187.gif",alt:"[拇指八]"},{url:"188.gif",alt:"[食指]"},{url:"189.gif",alt:"[ok]"},{url:"190.gif",alt:"[情侣]"},{url:"191.gif",alt:"[爱心]"},{url:"192.gif",alt:"[蹦哒]"},{url:"193.gif",alt:"[颤抖]"},{url:"194.gif",alt:"[怄气]"},{url:"195.gif",alt:"[跳舞]"}],[{url:"196.gif",alt:"[发呆]"},{url:"197.gif",alt:"[背着]"},{url:"198.gif",alt:"[伸手]"},{url:"199.gif",alt:"[耍帅]"},{url:"200.png",alt:"[微笑]"},{url:"201.png",alt:"[生病]"},{url:"202.png",alt:"[哭泣]"},{url:"203.png",alt:"[吐舌]"},{url:"204.png",alt:"[迷糊]"},{url:"205.png",alt:"[瞪眼]"},{url:"206.png",alt:"[恐怖]"},{url:"207.png",alt:"[忧愁]"},{url:"208.png",alt:"[眨眉]"},{url:"209.png",alt:"[闭眼]"},{url:"210.png",alt:"[鄙视]"},{url:"211.png",alt:"[阴暗]"},{url:"212.png",alt:"[小鬼]"},{url:"213.png",alt:"[礼物]"},{url:"214.png",alt:"[拜佛]"},{url:"215.png",alt:"[力量]"},{url:"216.png",alt:"[金钱]"},{url:"217.png",alt:"[蛋糕]"},{url:"218.png",alt:"[彩带]"},{url:"219.png",alt:"[礼物]"}]]}},onLoad:function(t){var e=this;if(this.globalData.initType=2,uni.setNavigationBarTitle({title:t.name}),this.fromUserId=t.fromUserId,this.toUserId=t.toUserId,this.fromAvatarPath=uni.getStorageSync("fromAvatarPath")||t.fromAvatarPath||"https://ossyidap.oss-cn-shenzhen.aliyuncs.com/image/png/9EAFE4BFEFDDF762718332C8F1BE9F2C.png",this.toAvatarPath=uni.getStorageSync("toAvatarPath")||t.toAvatarPath||"https://ossyidap.oss-cn-shenzhen.aliyuncs.com/image/png/9EAFE4BFEFDDF762718332C8F1BE9F2C.png",this.userInfoId=parseInt(this.fromUserId)>parseInt(this.toUserId)?a.default.md5(this.toUserId+this.fromUserId):a.default.md5(this.fromUserId+this.toUserId),this.globalData.connentSocket){var i={fromUserId:this.fromUserId,toUserId:this.toUserId,content:"page",smsType:"TEXT",sysType:1,smsStatus:10,smsList:!1,currentPage:1,pageSize:15};this.globalData.localSocket.send({data:JSON.stringify(i)})}else l.default.initSocket(this.fromUserId,this.toUserId);this.AUDIO.onEnded(function(t){e.playMsgid=null})},onShow:function(){var t=this;this.globalData.callback=function(e){if("0"!=String(e.userInfoId)&&0!=e.fromUserId)if(e&&e.list){t.nextPage=e.totalPage!=t.currentPage;var i=e.list;if(i.length>0){for(var a=0;a<i.length;a++)"IMAGE"==i[a].smsType&&(i[a]=t.setPicSize(i[a]));t.msgList=i.concat(t.msgList),t.$nextTick(function(){1==t.currentPage?t.scrollTop=99999:(t.nextPage&&uni.createSelectorQuery().select("#msg"+(15+t.msgTotal)).boundingClientRect().exec(function(e){null!=e[0]&&(t.scrollTop=e[0].top)}),t.toupperTop=!0)})}}else if(e.userInfoId==t.userInfoId){var n=t.msgList.push(e);t.toView(n)}else t.$emit("chatList",!0)}},methods:{toupper:function(){var t=this;if(t.nextPage&&t.toupperTop){t.toupperTop=!1,t.currentPage=t.currentPage+1;var e={fromUserId:t.fromUserId,toUserId:t.toUserId,content:"page",smsType:"TEXT",sysType:1,smsStatus:10,smsList:!1,currentPage:t.currentPage,pageSize:15};t.globalData.localSocket.send({data:JSON.stringify(e)})}},setPicSize:function(t){var e=uni.upx2px(350),i=uni.upx2px(350);if(t.width>e||t.height>i){var a=t.width/t.height;t.width>t.height?(t.width=e,t.height=t.width/a):(t.height=i,t.width=t.height*a)}return t},chooseEmoji:function(){this.showEmji="showEmoji"==this.showEmji?"hideEmoji":"showEmoji"},hideEmoji:function(){this.showEmji="showEmoji"==this.showEmji?"hideEmoji":""},addEmoji:function(t){this.textMsg+=t.alt},showPic:function(t){var e=t.content,i=e.indexOf("?");-1!=i&&(e=e.substring(0,i)+"?x-oss-process=style/big"),uni.previewImage({indicator:"none",current:e,urls:[e]})},playVoice:function(t){this.playMsgid=t.id,this.AUDIO.src=t.msg.url,console.log("msg.msg.url: "+t.msg.url),this.AUDIO.play()},sendText:function(t){this.hideEmoji();var e=this,i=t.detail.value?t.detail.value:e.textMsg;if(i&&""!=i){var o=(new Date).getTime()+e.fromUserId+e.toUserId+n.default.math(5);o=a.default.md5(o);var r={fromUserId:e.fromUserId,toUserId:e.toUserId,messageId:o,content:i,smsType:"TEXT",sysType:1,smsStatus:10,smsList:!1,currentPage:"",pageSize:""};this.globalData.localSocket.send({data:JSON.stringify(r),success:function(){var t=e.msgList.push(r);e.toView(t),e.textMsg="",e.msgTotal=e.msgTotal+1,r.dateTime=e.getTime(),uni.$emit("message",r)},fail:function(){console.log("发送失败！！！")}})}},chooseImage:function(){this.hideEmoji();var t=this;uni.chooseImage({sizeType:["original","compressed"],success:function(e){uni.showLoading({title:"发送中",mask:!1});var i=e.tempFilePaths;for(var o in i)uni.getImageInfo({src:i[o],success:function(e){var i=(new Date).getTime()+t.fromUserId+t.toUserId+n.default.math(5);i=a.default.md5(i);var o={fromUserId:t.fromUserId,toUserId:t.toUserId,messageId:i,content:e.path,smsType:"IMAGE",sysType:1,smsStatus:10,smsList:!1,currentPage:"",pageSize:"",width:e.width,height:e.height};t.upload(o)}})}})},upload:function(t){var e=this,i={},a=wx.getStorageSync("access_token")||"";i.file="[object Object]",i.type="big";var n=Date.parse(new Date);i.timestamp=n,i.sign=o.default.makeSign(r.default.apiUrl+"/api/upload",i),i.deviceId="wx",i.platformType="2",i.versionCode="4.0";uni.uploadFile({url:"".concat(r.default.apiUrl,"/api/upload"),filePath:t.content,name:"file",header:{"content-type":"multipart/form-data",Accept:"application/json",Authorization:"Bearer ".concat(a)},formData:i,success:function(i){var a=JSON.parse(i.data);console.log("result",a),200!=a.code&&0!=a.code||(t.content=a.data,e.globalData.localSocket.send({data:JSON.stringify(t),success:function(){t=e.setPicSize(t);var i=e.msgList.push(t);e.toView(i),e.msgTotal=e.msgTotal+1,t.dateTime=e.getTime(),e.$emit("message",t)}}))},complete:function(){uni.hideLoading()}})},toView:function(t){var e=this;this.$nextTick(function(){e.scrollToView="msg"+(t-1)})},getTime:function(){var t=new Date;return t.getHours()+":"+t.getMinutes()},sendBlur:function(t){this.$nextTick(function(){window.scrollTo(0,0)})},discard:function(){}}};e.default=c},"0300":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-view",{staticClass:"content",on:{touchstart:function(e){e=t.$handleEvent(e),t.hideEmoji(e)}}},[i("v-uni-scroll-view",{staticClass:"msg-list",attrs:{"upper-threshold":"20","scroll-y":"true","scroll-with-animation":t.scrollAnimation,"scroll-top":t.scrollTop,"scroll-into-view":t.scrollToView},on:{scrolltoupper:function(e){e=t.$handleEvent(e),t.toupper(e)}}},[t.nextPage&&!t.toupperTop?i("v-uni-view",{staticClass:"loding"},[i("v-uni-image",{attrs:{src:"/static/img/loading.gif"}})],1):t._e(),t._l(t.msgList,function(e,a){return i("v-uni-view",{key:a,staticClass:"row",attrs:{id:"msg"+a}},[e.timeInterval&&""!=e.timeInterval?i("v-uni-view",{staticClass:"time"},[t._v(t._s(e.timeInterval))]):t._e(),e.fromUserId==t.fromUserId?i("v-uni-view",{staticClass:"my"},[i("v-uni-view",{staticClass:"left"},["TEXT"==e.smsType?i("v-uni-view",{staticClass:"bubble"},[i("v-uni-rich-text",{attrs:{nodes:e.content}})],1):t._e(),"VOICE"==e.smsType?i("v-uni-view",{staticClass:"bubble voice",class:t.playMsgid==e.id?"play":"",on:{click:function(i){i=t.$handleEvent(i),t.playVoice(e)}}},[i("v-uni-view",{staticClass:"length"},[t._v(t._s(e.length))]),i("v-uni-view",{staticClass:"icon my-voice"})],1):t._e(),"IMAGE"==e.smsType?i("v-uni-view",{staticClass:"bubble img",on:{click:function(i){i=t.$handleEvent(i),t.showPic(e)}}},[i("v-uni-image",{style:{width:e.width+"px",height:e.height+"px"},attrs:{src:e.content}})],1):t._e()],1),i("v-uni-view",{staticClass:"right"},[i("v-uni-image",{attrs:{src:t.fromAvatarPath}})],1)],1):t._e(),e.fromUserId!=t.fromUserId?i("v-uni-view",{staticClass:"other"},[i("v-uni-view",{staticClass:"left"},[i("v-uni-image",{attrs:{src:t.toAvatarPath}})],1),i("v-uni-view",{staticClass:"right"},["TEXT"==e.smsType?i("v-uni-view",{staticClass:"bubble"},[i("v-uni-rich-text",{attrs:{nodes:e.content}})],1):t._e(),"VOICE"==e.smsType?i("v-uni-view",{staticClass:"bubble voice",class:t.playMsgid==e.id?"play":"",on:{click:function(i){i=t.$handleEvent(i),t.playVoice(e)}}},[i("v-uni-view",{staticClass:"icon other-voice"}),i("v-uni-view",{staticClass:"length"},[t._v(t._s(e.length))])],1):t._e(),"IMAGE"==e.smsType?i("v-uni-view",{staticClass:"bubble img",on:{click:function(i){i=t.$handleEvent(i),t.showPic(e)}}},[i("v-uni-image",{style:{width:e.width+"px",height:e.height+"px"},attrs:{src:e.content}})],1):t._e()],1)],1):t._e()],1)})],2)],1),i("v-uni-view",{staticClass:"input-box",class:t.showEmji,on:{touchmove:function(e){e.stopPropagation(),e.preventDefault(),e=t.$handleEvent(e),t.discard(e)}}},[i("v-uni-view",{staticClass:"textbox"},[i("v-uni-view",{staticClass:"voice-mode",class:[t.isVoice?"":"hidden",t.recording?"recording":""],on:{touchstart:function(e){e=t.$handleEvent(e),t.voiceBegin(e)},touchmove:function(e){e.stopPropagation(),e.preventDefault(),e=t.$handleEvent(e),t.voiceIng(e)},touchend:function(e){e=t.$handleEvent(e),t.voiceEnd(e)},touchcancel:function(e){e=t.$handleEvent(e),t.voiceCancel(e)}}},[t._v(t._s(t.voiceTis))]),i("v-uni-view",{staticClass:"text-mode",class:t.isVoice?"hidden":""},[i("v-uni-view",{staticClass:"box"},[i("v-uni-input",{attrs:{"confirm-type":"send","confirm-hold":"true","cursor-spacing":"15",id:"textMsg"},on:{blur:function(e){e=t.$handleEvent(e),t.sendBlur(e)},confirm:function(e){e=t.$handleEvent(e),t.sendText(e)}},model:{value:t.textMsg,callback:function(e){t.textMsg=e},expression:"textMsg"}})],1)],1)],1),i("v-uni-view",{staticClass:"more",on:{click:function(e){e=t.$handleEvent(e),t.chooseImage(e)}}},[i("v-uni-view",{staticClass:"icon tupian"})],1)],1)],1)},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},4082:function(t,e,i){"use strict";i.r(e);var a=i("0300"),n=i("c603");for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);i("61b7");var r=i("2877"),l=Object(r["a"])(n["default"],a["a"],a["b"],!1,null,"5565c324",null);e["default"]=l.exports},"61b7":function(t,e,i){"use strict";var a=i("b681"),n=i.n(a);n.a},"8bfb":function(t,e,i){"use strict";var a=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G"];function n(t){for(var e="",i=0;i<t;i++){var n=Math.ceil(17*Math.random());e+=a[n]}return e}t.exports={math:n}},b031:function(t,e,i){"use strict";function a(t){var e,i,a,n,r,l,s,c,h,v=Array(),w=7,x=12,k=17,y=22,A=5,E=9,I=14,T=20,S=4,C=11,U=16,j=23,M=6,P=10,z=15,F=21;for(t=p(t),v=m(t),l=1732584193,s=4023233417,c=2562383102,h=271733878,e=0;e<v.length;e+=16)i=l,a=s,n=c,r=h,l=f(l,s,c,h,v[e+0],w,3614090360),h=f(h,l,s,c,v[e+1],x,3905402710),c=f(c,h,l,s,v[e+2],k,606105819),s=f(s,c,h,l,v[e+3],y,3250441966),l=f(l,s,c,h,v[e+4],w,4118548399),h=f(h,l,s,c,v[e+5],x,1200080426),c=f(c,h,l,s,v[e+6],k,2821735955),s=f(s,c,h,l,v[e+7],y,4249261313),l=f(l,s,c,h,v[e+8],w,1770035416),h=f(h,l,s,c,v[e+9],x,2336552879),c=f(c,h,l,s,v[e+10],k,4294925233),s=f(s,c,h,l,v[e+11],y,2304563134),l=f(l,s,c,h,v[e+12],w,1804603682),h=f(h,l,s,c,v[e+13],x,4254626195),c=f(c,h,l,s,v[e+14],k,2792965006),s=f(s,c,h,l,v[e+15],y,1236535329),l=d(l,s,c,h,v[e+1],A,4129170786),h=d(h,l,s,c,v[e+6],E,3225465664),c=d(c,h,l,s,v[e+11],I,643717713),s=d(s,c,h,l,v[e+0],T,3921069994),l=d(l,s,c,h,v[e+5],A,3593408605),h=d(h,l,s,c,v[e+10],E,38016083),c=d(c,h,l,s,v[e+15],I,3634488961),s=d(s,c,h,l,v[e+4],T,3889429448),l=d(l,s,c,h,v[e+9],A,568446438),h=d(h,l,s,c,v[e+14],E,3275163606),c=d(c,h,l,s,v[e+3],I,4107603335),s=d(s,c,h,l,v[e+8],T,1163531501),l=d(l,s,c,h,v[e+13],A,2850285829),h=d(h,l,s,c,v[e+2],E,4243563512),c=d(c,h,l,s,v[e+7],I,1735328473),s=d(s,c,h,l,v[e+12],T,2368359562),l=u(l,s,c,h,v[e+5],S,4294588738),h=u(h,l,s,c,v[e+8],C,2272392833),c=u(c,h,l,s,v[e+11],U,1839030562),s=u(s,c,h,l,v[e+14],j,4259657740),l=u(l,s,c,h,v[e+1],S,2763975236),h=u(h,l,s,c,v[e+4],C,1272893353),c=u(c,h,l,s,v[e+7],U,4139469664),s=u(s,c,h,l,v[e+10],j,3200236656),l=u(l,s,c,h,v[e+13],S,681279174),h=u(h,l,s,c,v[e+0],C,3936430074),c=u(c,h,l,s,v[e+3],U,3572445317),s=u(s,c,h,l,v[e+6],j,76029189),l=u(l,s,c,h,v[e+9],S,3654602809),h=u(h,l,s,c,v[e+12],C,3873151461),c=u(c,h,l,s,v[e+15],U,530742520),s=u(s,c,h,l,v[e+2],j,3299628645),l=g(l,s,c,h,v[e+0],M,4096336452),h=g(h,l,s,c,v[e+7],P,1126891415),c=g(c,h,l,s,v[e+14],z,2878612391),s=g(s,c,h,l,v[e+5],F,4237533241),l=g(l,s,c,h,v[e+12],M,1700485571),h=g(h,l,s,c,v[e+3],P,2399980690),c=g(c,h,l,s,v[e+10],z,4293915773),s=g(s,c,h,l,v[e+1],F,2240044497),l=g(l,s,c,h,v[e+8],M,1873313359),h=g(h,l,s,c,v[e+15],P,4264355552),c=g(c,h,l,s,v[e+6],z,2734768916),s=g(s,c,h,l,v[e+13],F,1309151649),l=g(l,s,c,h,v[e+4],M,4149444226),h=g(h,l,s,c,v[e+11],P,3174756917),c=g(c,h,l,s,v[e+2],z,718787259),s=g(s,c,h,l,v[e+9],F,3951481745),l=o(l,i),s=o(s,a),c=o(c,n),h=o(h,r);return b(l)+b(s)+b(c)+b(h)}function n(t,e){return t<<e|t>>>32-e}function o(t,e){var i,a,n,o,r;return n=2147483648&t,o=2147483648&e,i=1073741824&t,a=1073741824&e,r=(1073741823&t)+(1073741823&e),i&a?2147483648^r^n^o:i|a?1073741824&r?3221225472^r^n^o:1073741824^r^n^o:r^n^o}function r(t,e,i){return t&e|~t&i}function l(t,e,i){return t&i|e&~i}function s(t,e,i){return t^e^i}function c(t,e,i){return e^(t|~i)}function f(t,e,i,a,l,s,c){return t=o(t,o(o(r(e,i,a),l),c)),o(n(t,s),e)}function d(t,e,i,a,r,s,c){return t=o(t,o(o(l(e,i,a),r),c)),o(n(t,s),e)}function u(t,e,i,a,r,l,c){return t=o(t,o(o(s(e,i,a),r),c)),o(n(t,l),e)}function g(t,e,i,a,r,l,s){return t=o(t,o(o(c(e,i,a),r),s)),o(n(t,l),e)}function m(t){var e,i=t.length,a=i+8,n=(a-a%64)/64,o=16*(n+1),r=Array(o-1),l=0,s=0;while(s<i)e=(s-s%4)/4,l=s%4*8,r[e]=r[e]|t.charCodeAt(s)<<l,s++;return e=(s-s%4)/4,l=s%4*8,r[e]=r[e]|128<<l,r[o-2]=i<<3,r[o-1]=i>>>29,r}function b(t){var e,i,a="",n="";for(i=0;i<=3;i++)e=t>>>8*i&255,n="0"+e.toString(16),a+=n.substr(n.length-2,2);return a}function p(t){for(var e="",i=0;i<t.length;i++){var a=t.charCodeAt(i);a<128?e+=String.fromCharCode(a):a>127&&a<2048?(e+=String.fromCharCode(a>>6|192),e+=String.fromCharCode(63&a|128)):(e+=String.fromCharCode(a>>12|224),e+=String.fromCharCode(a>>6&63|128),e+=String.fromCharCode(63&a|128))}return e}t.exports={md5:a}},b681:function(t,e,i){var a=i("deaf");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("16b2112f",a,!0,{sourceMap:!1,shadowMode:!1})},c603:function(t,e,i){"use strict";i.r(e);var a=i("00d3"),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);e["default"]=n.a},deaf:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */uni-page-body[data-v-5565c324]{background-color:#e5e5e5}[data-v-5565c324]::-webkit-scrollbar{width:%?6?%}@font-face{font-family:HMfont-home;src:url("data:application/x-font-woff2;charset=utf-8;base64,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") format("woff2")}.icon[data-v-5565c324]{font-family:HMfont-home!important;font-size:%?56?%;font-style:normal;color:#333}.icon.biaoqing[data-v-5565c324]:before{content:"\\E797"}.icon.jianpan[data-v-5565c324]:before{content:"\\E7B2"}.icon.yuyin[data-v-5565c324]:before{content:"\\E805"}.icon.tupian[data-v-5565c324]:before{content:"\\E639"}.icon.chehui[data-v-5565c324]:before{content:"\\E904"}.icon.luyin[data-v-5565c324]:before{content:"\\E905"}.icon.luyin2[data-v-5565c324]:before{content:"\\E677"}.icon.other-voice[data-v-5565c324]:before{content:"\\E667"}.icon.my-voice[data-v-5565c324]:before{content:"\\E906"}.hidden[data-v-5565c324]{display:none!important}@-webkit-keyframes showEM-data-v-5565c324{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(-42vw);transform:translateY(-42vw)}}@keyframes showEM-data-v-5565c324{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(-42vw);transform:translateY(-42vw)}}@-webkit-keyframes hideEM-data-v-5565c324{0%{-webkit-transform:translateY(-42vw);transform:translateY(-42vw)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes hideEM-data-v-5565c324{0%{-webkit-transform:translateY(-42vw);transform:translateY(-42vw)}to{-webkit-transform:translateY(0);transform:translateY(0)}}.emoji-box[data-v-5565c324]{width:96%;height:42vw;padding:%?20?% 2%;background-color:#f3f3f3;border-top:solid %?1?% #ddd;position:fixed;z-index:20;top:100%}.emoji-box.hideEmoji[data-v-5565c324]{-webkit-animation:hideEM-data-v-5565c324 .15s linear both;animation:hideEM-data-v-5565c324 .15s linear both}.emoji-box.showEmoji[data-v-5565c324]{-webkit-animation:showEM-data-v-5565c324 .15s linear both;animation:showEM-data-v-5565c324 .15s linear both}.emoji-box .swiper uni-swiper-item[data-v-5565c324]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.emoji-box .swiper uni-swiper-item uni-view[data-v-5565c324]{width:12vw;height:12vw;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}.emoji-box .swiper uni-swiper-item uni-view uni-image[data-v-5565c324]{width:60%}.input-box[data-v-5565c324]{width:98%;min-height:%?100?%;padding:0 1%;background-color:#f2f2f2;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:fixed;z-index:9999;bottom:0}.input-box.hideEmoji[data-v-5565c324]{-webkit-animation:hideEM-data-v-5565c324 .15s linear both;animation:hideEM-data-v-5565c324 .15s linear both}.input-box.showEmoji[data-v-5565c324]{-webkit-animation:showEM-data-v-5565c324 .15s linear both;animation:showEM-data-v-5565c324 .15s linear both}.input-box .more[data-v-5565c324],.input-box .voice[data-v-5565c324]{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;width:%?90?%;height:%?100?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.input-box .send[data-v-5565c324]{margin-left:%?20?%;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;width:%?100?%;height:%?100?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.input-box .send .btn[data-v-5565c324]{width:%?90?%;height:%?56?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;background:-webkit-gradient(linear,left top,right top,from(#f09b37),to(#eb632c));background:-o-linear-gradient(left,#f09b37,#eb632c);background:linear-gradient(90deg,#f09b37,#eb632c);color:#fff;border-radius:%?6?%;font-size:%?24?%}.input-box .textbox[data-v-5565c324]{width:100%;min-height:%?70?%;margin-left:%?20?%}.input-box .textbox .voice-mode[data-v-5565c324]{width:calc(100% - %?2?%);height:%?68?%;border-radius:%?70?%;border:solid %?1?% #cdcdcd;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;font-size:%?28?%;background-color:#fff;color:#555}.input-box .textbox .voice-mode.recording[data-v-5565c324]{background-color:#e5e5e5}.input-box .textbox .text-mode[data-v-5565c324]{width:100%;min-height:%?70?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;background-color:#fff;border-radius:%?40?%;margin:%?15?% 0}.input-box .textbox .text-mode .box[data-v-5565c324]{width:100%;padding-left:%?30?%;min-height:%?70?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.input-box .textbox .text-mode .box uni-textarea[data-v-5565c324]{width:100%}.input-box .textbox .text-mode .em[data-v-5565c324]{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;width:%?80?%;height:%?70?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.record[data-v-5565c324]{width:40vw;height:40vw;position:fixed;top:55%;left:30%;background-color:rgba(0,0,0,.6);border-radius:%?20?%}.record .ing[data-v-5565c324]{width:100%;height:30vw;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}@-webkit-keyframes volatility-data-v-5565c324{0%{background-position:0 130%}20%{background-position:0 150%}30%{background-position:0 155%}40%{background-position:0 150%}50%{background-position:0 145%}70%{background-position:0 150%}80%{background-position:0 155%}90%{background-position:0 140%}to{background-position:0 135%}}@keyframes volatility-data-v-5565c324{0%{background-position:0 130%}20%{background-position:0 150%}30%{background-position:0 155%}40%{background-position:0 150%}50%{background-position:0 145%}70%{background-position:0 150%}80%{background-position:0 155%}90%{background-position:0 140%}to{background-position:0 135%}}.record .ing .icon[data-v-5565c324]{background-image:-webkit-gradient(linear,left top,left bottom,from(#f09b37),color-stop(50%,#fff));background-image:-o-linear-gradient(top,#f09b37,#fff 50%);background-image:linear-gradient(180deg,#f09b37,#fff 50%);background-size:100% 200%;-webkit-animation:volatility-data-v-5565c324 1.5s ease-in-out -1.5s infinite alternate;animation:volatility-data-v-5565c324 1.5s ease-in-out -1.5s infinite alternate;-webkit-background-clip:text;-webkit-text-fill-color:rgba(0,0,0,0);font-size:%?150?%;color:#f09b37}.record .cancel[data-v-5565c324]{width:100%;height:30vw;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.record .cancel .icon[data-v-5565c324]{color:#fff;font-size:%?150?%}.record .tis[data-v-5565c324]{width:100%;height:10vw;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;font-size:%?28?%;color:#fff}.record .tis.change[data-v-5565c324]{color:#f09b37}.content[data-v-5565c324]{width:100%}.content .loding[data-v-5565c324]{text-align:center;padding:%?10?% 0 %?20?%}.content .loding uni-image[data-v-5565c324]{width:%?36?%;height:%?36?%}.content .msg-list[data-v-5565c324]{width:100%;position:absolute;top:0;bottom:%?100?%;background:#e5e5e5}.content .msg-list .row[data-v-5565c324]{\n      /* &:first-child{\r\n\t\t\t\tmargin-top: 20upx;\r\n\t\t\t} */padding:%?20?% 2%}.content .msg-list .row .time[data-v-5565c324]{font-size:%?24?%;color:#999;text-align:center;margin-bottom:%?30?%}.content .msg-list .row .my .left[data-v-5565c324],.content .msg-list .row .other .right[data-v-5565c324]{width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.content .msg-list .row .my .left .bubble[data-v-5565c324],.content .msg-list .row .other .right .bubble[data-v-5565c324]{max-width:70%;min-height:%?50?%;border-radius:%?10?%;padding:%?15?% %?20?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;font-size:%?32?%;word-break:break-word}.content .msg-list .row .my .left .bubble.img[data-v-5565c324],.content .msg-list .row .other .right .bubble.img[data-v-5565c324]{background-color:rgba(0,0,0,0);padding:0;overflow:hidden}.content .msg-list .row .my .left .bubble.img uni-image[data-v-5565c324],.content .msg-list .row .other .right .bubble.img uni-image[data-v-5565c324]{max-width:%?350?%;max-height:%?350?%}.content .msg-list .row .my .left .bubble.voice .icon[data-v-5565c324],.content .msg-list .row .other .right .bubble.voice .icon[data-v-5565c324]{font-size:%?40?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.content .msg-list .row .my .left .bubble.voice .icon[data-v-5565c324]:after,.content .msg-list .row .other .right .bubble.voice .icon[data-v-5565c324]:after{content:" ";width:%?53?%;height:%?53?%;border-radius:100%;position:absolute;-webkit-box-sizing:border-box;box-sizing:border-box}.content .msg-list .row .my .left .bubble.voice .length[data-v-5565c324],.content .msg-list .row .other .right .bubble.voice .length[data-v-5565c324]{font-size:%?28?%}.content .msg-list .row .my .right[data-v-5565c324],.content .msg-list .row .other .left[data-v-5565c324]{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;width:%?80?%;height:%?80?%}.content .msg-list .row .my .right uni-image[data-v-5565c324],.content .msg-list .row .other .left uni-image[data-v-5565c324]{width:%?80?%;height:%?80?%;border-radius:%?10?%}.content .msg-list .row .my[data-v-5565c324]{width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end}.content .msg-list .row .my .left[data-v-5565c324]{min-height:%?80?%;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end}.content .msg-list .row .my .left .bubble[data-v-5565c324]{\n            /* background-color: #f06c7a; */background-color:#ff65a3;color:#fff}.content .msg-list .row .my .left .bubble.voice .icon[data-v-5565c324]{color:#fff}.content .msg-list .row .my .left .bubble.voice .length[data-v-5565c324]{margin-right:%?20?%}@-webkit-keyframes my-play-data-v-5565c324{0%{-webkit-transform:translateX(80%);transform:translateX(80%)}to{-webkit-transform:translateX(0);transform:translateX(0)}}@keyframes my-play-data-v-5565c324{0%{-webkit-transform:translateX(80%);transform:translateX(80%)}to{-webkit-transform:translateX(0);transform:translateX(0)}}.content .msg-list .row .my .left .bubble.play .icon[data-v-5565c324]:after{border-left:solid %?10?% rgba(240,108,122,.5);-webkit-animation:my-play-data-v-5565c324 1s linear infinite;animation:my-play-data-v-5565c324 1s linear infinite}.content .msg-list .row .my .right[data-v-5565c324]{margin-left:%?15?%}.content .msg-list .row .other[data-v-5565c324]{width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.content .msg-list .row .other .left[data-v-5565c324]{margin-right:%?15?%}.content .msg-list .row .other .right[data-v-5565c324]{-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.content .msg-list .row .other .right .username[data-v-5565c324]{width:100%;height:%?45?%;font-size:%?24?%;color:#999;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.content .msg-list .row .other .right .username .name[data-v-5565c324]{margin-right:%?50?%}.content .msg-list .row .other .right .bubble[data-v-5565c324]{background-color:#fff;color:#333}.content .msg-list .row .other .right .bubble.voice .icon[data-v-5565c324]{color:#333}.content .msg-list .row .other .right .bubble.voice .length[data-v-5565c324]{margin-left:%?20?%}@-webkit-keyframes other-play-data-v-5565c324{0%{-webkit-transform:translateX(-80%);transform:translateX(-80%)}to{-webkit-transform:translateX(0);transform:translateX(0)}}@keyframes other-play-data-v-5565c324{0%{-webkit-transform:translateX(-80%);transform:translateX(-80%)}to{-webkit-transform:translateX(0);transform:translateX(0)}}.content .msg-list .row .other .right .bubble.play .icon[data-v-5565c324]:after{border-right:solid %?10?% hsla(0,0%,100%,.8);-webkit-animation:other-play-data-v-5565c324 1s linear infinite;animation:other-play-data-v-5565c324 1s linear infinite}body.?%PAGE?%[data-v-5565c324]{background-color:#e5e5e5}',""])},f6ce:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("c073"));function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){return a.default.connentSocket?(console.warn("连接已存在！"),!1):t&&""!=t?2==a.default.initType&&""==e?(console.error("用户id为空连接失败！"),!1):(a.default.localSocket=wx.connectSocket({url:"".concat(a.default.url,"/notice/socket?userId=").concat(t,"&openType=sms"),success:function(){a.default.userId=t,2==a.default.initType&&(a.default.toUserId=e),a.default.connentSocket=!0}}),a.default.localSocket.onOpen(function(i){console.log("socket连接成功，initType = "+a.default.initType),1==a.default.initType?f(t):2==a.default.initType&&d(t,e),a.default.connentSocket=!0,c(),a.default.connectTime=3e3}),a.default.localSocket.onError(function(t){a.default.connentSocket=!1,l(),a.default.connectTime=2*a.default.connectTime}),a.default.localSocket.onClose(function(t){a.default.connentSocket=!1}),void a.default.localSocket.onMessage(function(t){var e=JSON.parse(t.data);if(console.log("收到消息",e),!e.length&&!e.currentPage&&0!=e.fromUserId){var i={id:e.id,fromUserId:0,toUserId:e.fromUserId,messageId:e.messageId,content:"page",smsType:"TEXT",sysType:1,smsStatus:40,smsList:!1,currentPage:"",pageSize:""};r(JSON.stringify(i))}a.default.callback(e),s()})):(console.error("用户id为空连接失败！"),!1)}function r(t){return new Promise(function(e,i){a.default.connentSocket&&a.default.localSocket.send({data:t,success:function(t){e(t)},fail:function(t){i(t)}})})}function l(){if(a.default.lockReconnect)return!1;a.default.lockReconnect=!0,a.default.timeoutNum&&clearTimeout(a.default.timeoutNum),a.default.timeoutNum=setTimeout(function(){a.default.userId&&""!=a.default.userId&&(o(a.default.userId,a.default.toUserId),a.default.lockReconnect=!1)},a.default.connectTime)}function s(){clearTimeout(a.default.timeoutObj),c()}function c(){a.default.timeoutObj&&clearTimeout(a.default.timeoutObj),a.default.timeoutObj=setTimeout(function(){if(a.default.connentSocket){var t={id:0,fromUserId:0,toUserId:0,userInfoId:0,content:"ping",smsType:"TEXT",sysType:1,smsStatus:10,smsList:!1,currentPage:"",pageSize:""};r(JSON.stringify(t))}else l()},a.default.timeout)}function f(t){var e={fromUserId:t,toUserId:"",content:"page",smsType:"TEXT",sysType:1,smsStatus:10,smsList:!0,currentPage:"",pageSize:""};console.log("获取聊天列表！！！"),r(JSON.stringify(e))}function d(t,e){var i={fromUserId:t,toUserId:e,content:"page",smsType:"TEXT",sysType:1,smsStatus:10,smsList:!1,currentPage:1,pageSize:15};console.log("获取聊天历史！！！"),r(JSON.stringify(i))}var u={initSocket:o};e.default=u}}]);