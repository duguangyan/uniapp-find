(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-setting-authentication-authentication"],{"0790":function(a,t,e){"use strict";var i=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("v-uni-view",{staticClass:"wx_content"},[e("v-uni-view",{staticClass:"authentication"},[0!=a.userType&&3!=a.userType||0!=a.userStatus&&3!=a.userStatus?a._e():e("v-uni-view",{staticClass:"nav flex"},[a._l(a.navArr,function(t,i){return e("v-uni-view",{key:i,staticClass:"flex-1",on:{click:function(t){t=a.$handleEvent(t),a.navCheck(i)}}},[e("v-uni-image",{attrs:{src:a.navIndex==i?t.activeImg:t.imgUrl}}),e("v-uni-view",[a._v(a._s(t.name))])],1)}),e("v-uni-view",{staticClass:"line"})],2),e("v-uni-view",{staticClass:"input"},a._l(a.arr,function(t,i){return e("v-uni-view",{key:i,staticClass:"li cf"},[e("v-uni-view",{staticClass:"name fll"},[a._v(a._s(t.name))]),e("v-uni-view",{staticClass:"value fll cf"},[e("v-uni-input",{attrs:{type:"text",placeholder:t.placeholder},on:{click:function(t){t.stopPropagation(),t=a.$handleEvent(t),a.onFocus(i)}},model:{value:t.value,callback:function(e){a.$set(t,"value",e)},expression:"item.value"}}),1!=a.userType&&2!=a.userType||2!=i?a._e():e("v-uni-view",{staticClass:"VerificationCode flr",on:{click:function(t){t.stopPropagation(),t=a.$handleEvent(t),a.getVerificationCode(t)}}},[a._v(a._s(a.VerificationCodeText))])],1)],1)}),1),e("v-uni-view",a._l(a.ngImgTextArr,function(t,i){return(0==a.navIndex?i<2:i>=2)?e("v-uni-view",{key:i,staticClass:"image"},[e("v-uni-image",{attrs:{src:t.img},on:{click:function(t){t=a.$handleEvent(t),a.checkImg(i)}}}),""==a.bgImg[i]?e("v-uni-view",{staticClass:"bgszie",on:{click:function(t){t=a.$handleEvent(t),a.checkImg(i)}}},[a._v("+")]):a._e(),e("v-uni-view",{staticClass:"text"},[a._v(a._s(t.text))])],1):a._e()}),1),0!=a.userStatus?e("v-uni-view",{staticClass:"info text-red"},[a._v(a._s(a.status_label))]):a._e(),0==a.userStatus?e("v-uni-view",{staticClass:"btn-warp"},[e("v-uni-view",{staticClass:"btn",on:{click:function(t){t=a.$handleEvent(t),a.save(t)}}},[a._v("提交")])],1):a._e(),3==a.userStatus?e("v-uni-view",{staticClass:"btn-warp"},[e("v-uni-view",{staticClass:"btn",on:{click:function(t){t=a.$handleEvent(t),a.save(t)}}},[a._v("重新提交")])],1):a._e()],1),a.showCon?e("v-uni-view",{staticClass:"modal-mask",on:{click:function(t){t=a.$handleEvent(t),a.changeModalCancel(t)}}},[e("v-uni-view",{staticClass:"modal-dialog"},[e("v-uni-view",{staticClass:"modal-title"},[a._v("温馨提示")]),e("v-uni-view",{staticClass:"modal-content"},[a._v("获取定位失败，请前往设置打开定位权限")]),e("v-uni-view",{staticClass:"modal-footer"},[e("v-uni-view",{staticClass:"btn-cancel",on:{click:function(t){t=a.$handleEvent(t),a.changeModalCancel(t)}}},[a._v("取消")]),e("v-uni-button",{staticClass:"btn-confirm button-on-view",staticStyle:{padding:"0rpx"},attrs:{"open-type":"openSetting"},on:{click:function(t){t=a.$handleEvent(t),a.changeModalCancel(t)}}},[a._v("设置")])],1)],1)],1):a._e()],1)},n=[];e.d(t,"a",function(){return i}),e.d(t,"b",function(){return n})},"10c7":function(a,t,e){"use strict";var i=e("fea2"),n=e.n(i);n.a},4413:function(a,t,e){"use strict";e.r(t);var i=e("66f4"),n=e.n(i);for(var o in i)"default"!==o&&function(a){e.d(t,a,function(){return i[a]})}(o);t["default"]=n.a},"66f4":function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(e("e378")),n=o(e("0089"));function o(a){return a&&a.__esModule?a:{default:a}}var d={data:function(){return{title:"用户认证",VerificationCodeText:"获取验证码",code_id:"",userType:0,userStatus:0,status_label:"",showCon:!1,navArr:[{name:"个人用户",imgUrl:"https://static.yidap.com/miniapp/o2o/imgs/ic_certification_personl_no_select.png",activeImg:"https://static.yidap.com/miniapp/o2o/imgs/ic_certification_personl_select.png"},{name:"企业用户",imgUrl:"https://static.yidap.com/miniapp/o2o/imgs/ic_certification_company_no_select.png",activeImg:"https://static.yidap.com/miniapp/o2o/imgs/ic_certification_company_select.png"}],navIndex:0,bgImg:["","",""],arr:[{name:"姓名:",value:"",placeholder:"请输入您的姓名"},{name:"联系电话:",value:"",placeholder:"请输入您的手机"},{name:"验证码:",value:"",placeholder:"请输入验证码"},{name:"详细地址:",value:"",placeholder:"请选择地区"},{name:"门牌号:",value:"",placeholder:"街道、楼牌等"},{name:"身份证号码:",value:"",placeholder:"请输入您的身份证号码"}],ngImgTextArr:[{text:"请上传身份证正面(信息页)",img:"https://static.yidap.com/miniapp/o2o/imgs/ic_certifcation_card_back.png"},{text:"请上传身份证反面(国徽页)",img:"https://static.yidap.com/miniapp/o2o/imgs/ic_certifcation_card_back.png"},{text:"请上传营业执照正面",img:"https://static.yidap.com/miniapp/o2o/imgs/ic_certifcation_card_back.png"}]}},onLoad:function(a){var t=this;this.$data.userType=uni.getStorageSync("userType"),1==this.$data.userType||2==this.$data.userType?this.$data.arr=[{name:"姓名:",value:"",placeholder:"请输入您的姓名"},{name:"联系电话:",value:"",placeholder:"请输入您的手机"},{name:"验证码:",value:"",placeholder:"请输入验证码"},{name:"详细地址:",value:"",placeholder:"请选择地区"},{name:"门牌号:",value:"",placeholder:"街道、楼牌等"},{name:"身份证号码:",value:"",placeholder:"请输入您的身份证号码"}]:this.$data.arr=[{name:"姓名:",value:"",placeholder:"请输入您的姓名"},{name:"联系电话:",value:"",placeholder:"请输入您的手机"},{name:"详细地址:",value:"",placeholder:"请选择地区"},{name:"门牌号:",value:"",placeholder:"街道、楼牌等"},{name:"身份证号码:",value:"",placeholder:"请输入您的身份证号码"}],n.default.auditApply({}).then(function(a){if((200==a.code||0==a.code)&&(t.$data.userStatus=a.data.status,a.data.status>0)){t.$data.userAuthentication=a.data;var e=a.data;t.$data.status_label=e.status_label,t.$data.arr[0].value=e.consignee,t.$data.arr[1].value=e.mobile,t.$data.arr[3].value=e.address,2==t.$data.userType||3==t.$data.userType?(t.$data.arr[4].value="",t.$data.arr[5].value=e.id_card_no):t.$data.arr[4].value=e.id_card_no,0!=t.$data.userStatus&&(1==e.type?(t.$data.ngImgTextArr[0].img=e.id_card_front,t.$data.ngImgTextArr[1].img=e.id_card_back,t.$data.bgImg[0]=e.id_card_front,t.$data.bgImg[1]=e.id_card_back):(t.$data.ngImgTextArr[3].img=e.id_card_front,t.$data.bgImg[3]=e.id_card_front))}})},onShow:function(){0==this.$data.userType||3==this.$data.userType?uni.setNavigationBarTitle({title:"用户认证"}):1==this.$data.userType?uni.setNavigationBarTitle({title:"认证找料员"}):2==this.$data.userType&&uni.setNavigationBarTitle({title:"认证配送员"})},methods:{getVerificationCode:function(){var a=this;if(""==this.$data.arr[1].value)return i.default.successTips("请填写手机号码"),!1;n.default.regSMS({method:"POST",data:{mobile:this.$data.arr[1].value}}).then(function(t){200!=t.code&&0!=t.code||(a.$data.code_id=t.data.id,a.$data.VerificationCodeText="重新发送")}).catch(function(a){i.default.errorTips(a.msg||a.message)})},changeModalCancel:function(){this.$data.showCon=!1},onFocus:function(a){console.log(a);var t=this,e=uni.getStorageSync("userType");0==e||3==e?2==a&&uni.chooseLocation({success:function(a){console.log("位置名称："+a.name),console.log("详细地址："+a.address),console.log("纬度："+a.latitude),console.log("经度："+a.longitude),0==t.$data.userType||3==t.$data.userType?(t.$data.arr[2].value=a.address,t.$data.arr[3].value=a.name):(t.$data.arr[3].value=a.address,t.$data.arr[4].value=a.name)},fail:function(a){i.default.errorTips("获取地图定位失败："+a.errMsg),console.log(a),uni.getSetting({success:function(a){a.authSetting["scope.userLocation"]||(t.$data.showCon=!0)}})}}):3==a&&uni.chooseLocation({success:function(a){console.log("位置名称："+a.name),console.log("详细地址："+a.address),console.log("纬度："+a.latitude),console.log("经度："+a.longitude),0==t.$data.userType||3==t.$data.userType?(t.$data.arr[2].value=a.address,t.$data.arr[3].value=a.name):(t.$data.arr[3].value=a.address,t.$data.arr[4].value=a.name)},fail:function(a){i.default.errorTips("获取地图定位失败："+a.errMsg),console.log(a),uni.getSetting({success:function(a){a.authSetting["scope.userLocation"]||(t.$data.showCon=!0)}})}})},navCheck:function(a){this.$data.navIndex=a,0==a?(this.$data.arr[0].name="姓名:",this.$data.arr[1].name="联系电话:",this.$data.arr[4].name="身份证号码:",this.$data.arr[0].placeholder="请输入您的姓名",this.$data.arr[1].placeholder="请输入您的联系电话",this.$data.arr[4].placeholder="请输入您的身份证号码"):(this.$data.arr[0].name="企业名称:",this.$data.arr[1].name="企业法人:",this.$data.arr[4].name="营业执照编号:",this.$data.arr[0].placeholder="请输入您的企业名称",this.$data.arr[1].placeholder="请输入您的企业法人",this.$data.arr[4].placeholder="请输入您的营业执照编号")},checkImg:function(a){var t=this;uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){var o=wx.getStorageSync("access_token")||"",d={file:"[object Object]",type:"big"},r=Date.parse(new Date);d.timestamp=r,d.sign=i.default.makeSign(n.default.apiUrl+"/api/upload",d),d.deviceId="wx",d.platformType="2",d.versionCode="4.0";wx.uploadFile({url:"".concat(n.default.apiUrl,"/api/upload"),filePath:e.tempFilePaths[0],name:"file",header:{"content-type":"multipart/form-data",Accept:"application/json",Authorization:"Bearer ".concat(o)},formData:d,success:function(e){console.log("图片上传"),console.log(e);var n=JSON.parse(e.data);if(200===n.code||0===n.code){var o=JSON.parse(e.data).data;t.$data.ngImgTextArr[a].img=o,t.$data.bgImg[a]=o,i.default.successTips("图片上传成功")}else i.default.errorTips("上传错误")},fail:function(a){console.log(a)},complete:function(){}})}})},save:function(){var a=this;if(0==this.$data.navIndex){if(""==this.$data.bgImg[0]||""==this.$data.bgImg[1]){if(""==this.$data.bgImg[0])return i.default.errorTips("请上传身份证正面照"),!1;if(""==this.$data.bgImg[1])return i.default.errorTips("请上传身份证背面照"),!1}}else if(""==this.$data.bgImg[2])return i.default.errorTips("请上传营业执照"),!1;if(""==this.$data.code_id)return i.default.errorTips("请输入验证码"),!1;var t="";t=1==this.$data.userType||2==this.$data.userType?{from:1,type:this.$data.navIndex+1,consignee:this.$data.arr[0].value,mobile:this.$data.arr[1].value,address:a.$data.arr[3].value+a.$data.arr[4].value,id_card_no:this.$data.arr[5].value,id_card_back:this.$data.bgImg[1],id_card_front:this.$data.bgImg[0]}:{from:1,type:this.$data.navIndex+1,consignee:this.$data.arr[0].value,mobile:this.$data.arr[1].value,address:a.$data.arr[2].value+a.$data.arr[3].value,id_card_no:this.$data.arr[4].value,id_card_back:this.$data.bgImg[1],id_card_front:this.$data.bgImg[0]},1==a.$data.navIndex&&(t.id_card_front=this.$data.bgImg[2]),0==this.$data.userType||3==this.$data.userType?n.default.auditApply({method:"POST",data:t}).then(function(a){200==a.code||0==a.code?(i.default.successTips("提交审核成功"),setTimeout(function(){uni.navigateBack({delta:1})},1e3)):i.default.errorTips(a.msg)}).catch(function(a){i.default.errorTips(a.msg||a.message)}):1==this.$data.userType?(t.code=this.$data.arr[2].value,t.id=this.$data.code_id,t.type=1,n.default.staffAudit({method:"POST",data:t}).then(function(a){200==a.code||0==a.code?(i.default.successTips("提交审核成功"),setTimeout(function(){uni.navigateBack({delta:1})},1e3)):i.default.successTips(a.msg)}).catch(function(a){i.default.errorTips(a.msg||a.message)})):2==this.$data.userType&&(t.code=this.$data.arr[2].value,t.id=this.$data.code_id,t.type=2,n.default.staffAudit({method:"POST",data:t}).then(function(a){200==a.code||0==a.code?(i.default.successTips("提交审核成功"),setTimeout(function(){uni.navigateBack({delta:1})},1e3)):i.default.errorTips(a.msg)}).catch(function(a){i.default.errorTips(a.msg||a.message)}))}}};t.default=d},ca07:function(a,t,e){t=a.exports=e("2350")(!1),t.push([a.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.VerificationCode[data-v-d1da2226]{width:%?160?%;text-align:center;border:%?1?% solid #f29800;color:#f29800;position:absolute;right:%?10?%;top:%?10?%;z-index:9999;height:%?60?%;line-height:%?60?%;color:#fff;background:#f29800}.info[data-v-d1da2226]{line-height:%?100?%;padding-left:%?30?%;border-top:%?20?% solid #f4f4f4;background:#fff}.wx_content[data-v-d1da2226]{background:#f4f4f4;height:100%}.height160[data-v-d1da2226]{height:%?140?%}.authentication[data-v-d1da2226]{background:#fff;margin-bottom:%?240?%}.authentication .btn-warp[data-v-d1da2226]{background:#f4f4f4;padding-bottom:%?100?%}.authentication .btn-warp .btn[data-v-d1da2226]{height:%?80?%;line-height:%?80?%;text-align:center;background:orange;color:#fff;width:%?650?%;position:relative;left:%?40?%;top:%?40?%;bottom:%?40?%;border-radius:%?10?%}.authentication .image[data-v-d1da2226]{width:100%;position:relative}.authentication .image uni-image[data-v-d1da2226]{width:%?400?%;height:%?240?%;margin-left:%?175?%}.authentication .image .bgszie[data-v-d1da2226]{position:absolute;font-size:%?140?%;top:%?20?%;left:%?320?%;z-index:9999;color:#fff}.authentication .image .text[data-v-d1da2226]{text-align:center;line-height:%?60?%;padding-bottom:%?10?%}.authentication .input[data-v-d1da2226]{margin:%?20?% %?30?%}.authentication .input .li[data-v-d1da2226]{border-bottom:%?1?% solid #eee;height:%?80?%;line-height:%?80?%}.authentication .input .li .name[data-v-d1da2226]{width:%?200?%}.authentication .input .li .value[data-v-d1da2226]{width:%?490?%;position:relative}.authentication .input .li .value uni-input[data-v-d1da2226]{height:%?80?%;line-height:%?80?%}.authentication .nav[data-v-d1da2226]{position:relative;border-bottom:%?20?% solid #eee;padding-bottom:%?40?%}.authentication .nav uni-image[data-v-d1da2226]{width:%?80?%;height:%?80?%;margin:%?10?% auto;margin-top:%?40?%}.authentication .nav .flex-1[data-v-d1da2226]{text-align:center}.authentication .nav .line[data-v-d1da2226]{position:absolute;height:60%;width:%?1?%;background:#eee;left:%?375?%;top:%?50?%}.modal-mask[data-v-d1da2226]{width:100%;height:100%;position:fixed;top:0;left:0;background-color:rgba(0,0,0,.5);overflow:hidden;z-index:9999;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}.modal-dialog[data-v-d1da2226]{width:%?540?%;overflow:hidden;z-index:9999;background:#f9f9f9;border-radius:%?5?%}.modal-title[data-v-d1da2226]{padding-top:%?30?%;font-size:%?32?%;color:#030303;text-align:center}.modal-content[data-v-d1da2226]{padding:%?20?% %?32?%;font-size:%?28?%}.modal-footer[data-v-d1da2226]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;height:%?86?%;border-top:1px solid #dedede;font-size:%?34?%;line-height:%?86?%}.btn-cancel[data-v-d1da2226]{width:50%;color:#abb4bd;text-align:center;border-right:1px solid #dedede}.btn-confirm[data-v-d1da2226]{width:50%;color:#6fb64b;text-align:center;font-weight:500}',""])},fea2:function(a,t,e){var i=e("ca07");"string"===typeof i&&(i=[[a.i,i,""]]),i.locals&&(a.exports=i.locals);var n=e("4f06").default;n("062668e6",i,!0,{sourceMap:!1,shadowMode:!1})},fefa:function(a,t,e){"use strict";e.r(t);var i=e("0790"),n=e("4413");for(var o in n)"default"!==o&&function(a){e.d(t,a,function(){return n[a]})}(o);e("10c7");var d=e("2877"),r=Object(d["a"])(n["default"],i["a"],i["b"],!1,null,"d1da2226",null);t["default"]=r.exports}}]);