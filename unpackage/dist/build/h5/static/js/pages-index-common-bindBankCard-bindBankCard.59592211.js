(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-common-bindBankCard-bindBankCard"],{"0081":function(t,a,e){a=t.exports=e("2350")(!1),a.push([t.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.item-2[data-v-510c58cb]{width:%?360?%!important;position:relative}.item-5[data-v-510c58cb]{width:%?420?%!important;position:relative}.item-5-btn[data-v-510c58cb]{width:%?88?%;height:%?88?%;position:absolute;right:%?5?%;top:%?0?%}.item-5-btn uni-image[data-v-510c58cb]{width:%?88?%;height:%?88?%}.item-2-btn[data-v-510c58cb]{width:%?180?%;height:%?88?%;line-height:%?88?%;text-align:center;background:#f29800;color:#fff;position:absolute;right:%?5?%;top:%?0?%;z-index:99999;border-radius:%?0?% %?10?% %?10?% %?0?%}.alipay[data-v-510c58cb]{height:100%;background:#f4f4f4}.alipay .btn[data-v-510c58cb]{width:%?630?%;height:%?88?%;line-height:%?88?%;background:#f29800;color:#fff;font-size:%?32?%;text-align:center;margin:0 auto;border-radius:%?10?%;margin-top:%?140?%}.alipay .items[data-v-510c58cb]{padding:%?50?% %?30?%;background:#fff}.alipay .items .item[data-v-510c58cb]{margin-bottom:%?30?%;position:relative;font-size:%?30?%;position:relative;top:%?-20?%}.alipay .items .item uni-text[data-v-510c58cb]{display:inline-block;width:%?160?%}.alipay .items .item uni-input[data-v-510c58cb]{display:inline-block;width:%?480?%;height:%?88?%;line-height:%?88?%;margin-left:%?20?%;background:#f4f4f4;color:#333;padding-left:%?20?%;position:relative;top:%?0?%;border-radius:%?10?%}',""])},"370f":function(t,a,e){var i=e("0081");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=e("4f06").default;n("1b8c79a9",i,!0,{sourceMap:!1,shadowMode:!1})},"412a":function(t,a,e){"use strict";var i=e("370f"),n=e.n(i);n.a},5116:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=r(e("e378")),n=r(e("0089"));function r(t){return t&&t.__esModule?t:{default:t}}var d={data:function(){return{btnText:"立即绑定",codeBtnTxt:"获取验证码",code_id:"",bank_card_type:0,bank_name:"",items:[{t:"持卡人姓名",v:"",p:"请输入持卡人姓名"},{t:"储蓄卡号",v:"",p:"请上传储蓄银行卡正面照片"},{t:"开户银行",v:"",p:"请输入开户银行"},{t:"开户网点",v:"",p:"请输入开户网点信息"},{t:"手机号码",v:"",p:"请输入您的手机号码"},{t:"短信验证码",v:"",p:"请输入短信验证码"}]}},onLoad:function(t){1==t.edit&&this.memberBankCardBind()},onShow:function(){},methods:{memberBankCardBind:function(){var t=this;n.default.memberBankCardBind({}).then(function(a){if(200==a.code||0==a.code){var e=a.data;t.$data.items[0].v=e.real_name,t.$data.items[1].v=e.bank_card_number,t.$data.items[2].v=e.bank_name,t.$data.items[3].v=e.bank_card_opening,t.$data.items[4].v=e.mobile,t.$data.bank_card_type=e.bank_card_type,t.$data.bank_card_img=e.bank_card_img}else i.default.errorTips(a.msg)}).catch(function(t){i.default.errorTips(t.msg||t.message)})},getBankCardInfo:function(t){var a=this;uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){var r=wx.getStorageSync("access_token")||"",d={file:"[object Object]",type:"big"},o=Date.parse(new Date);d.timestamp=o,d.sign=i.default.makeSign(n.default.apiUrl+"/api/upload",d),d.deviceId="wx",d.platformType="2",d.versionCode="4.0";wx.uploadFile({url:"".concat(n.default.apiUrl,"/api/upload"),filePath:e.tempFilePaths[0],name:"file",header:{"content-type":"multipart/form-data",Accept:"application/json",Authorization:"Bearer ".concat(r)},formData:d,success:function(e){console.log("图片上传"),console.log(e);var r=JSON.parse(e.data);200===r.code||0===r.code?(a.$data.bank_card_img=r.data,n.default.apiOcrBankCard({method:"POST",data:{bank_card_img:r.data}}).then(function(e){200!=e.code&&0!=e.code||(a.$data.bank_card_type=e.data.bank_card_type,a.$data.items[2].v=e.data.bank_name,a.$data.bank_name=e.data.bank_name,a.$data.items[t].v=e.data.bank_card_number)})):i.default.errorTips("上传错误")},fail:function(t){console.log(t)},complete:function(){}})}})},bindAlipay:function(){if(""==this.$data.items[0].v)return i.default.errorTips("请输入您的银行卡姓名"),!1;if(""==this.$data.items[1].v)return i.default.errorTips("请输入您的储蓄卡卡号"),!1;if(""==this.$data.items[2].v)return i.default.errorTips("请输入您的开户银行"),!1;if(""==this.$data.items[3].v)return i.default.errorTips("请输入您的开户银行网点地址"),!1;if(""==this.$data.items[4].v)return i.default.errorTips("请输入您的手机号"),!1;if(""==this.$data.items[5].v)return i.default.errorTips("请输入短信验证码"),!1;if(""==this.$data.code_id)return i.default.errorTips("请重新获取验证码"),!1;if(this.$data.bank_card_type>1)return i.default.errorTips("此类型卡不能办理提现业务，请重新上传储蓄卡照片"),!1;var t={bank_name:this.$data.items[2].v,real_name:this.$data.items[0].v,id:this.$data.code_id,mobile:this.$data.items[4].v,code:this.$data.items[5].v,bank_card_number:this.$data.items[1].v,bank_card_type:this.$data.bank_card_type,bank_card_opening:this.$data.items[3].v,bank_card_img:this.$data.bank_card_img};n.default.memberBankCardBind({method:"POST",data:t}).then(function(t){200==t.code||0==t.code?(i.default.successTips(t.msg),uni.navigateBack({delta:1})):i.default.errorTips(t.msg)}).catch(function(t){i.default.errorTips(t.msg||t.message)})},getCode:function(){var t=this;if(""==this.$data.items[4].v)return i.default.errorTips("手机号不能为空"),!1;if(!i.default.vailPhone(this.$data.items[4].v))return i.default.errorTips("请输入正确手机号"),!1;var a={mobile:this.$data.items[4].v};n.default.regSMS({method:"POST",data:a}).then(function(a){200==a.code||0==a.code?(t.$data.code_id=a.data.id,i.default.errorTips("短信发送成功"),t.$data.codeBtnTxt="重新获取"):i.default.errorTips(a.msg)}).catch(function(t){i.default.errorTips(t.msg||t.message)})}}};a.default=d},"958d":function(t,a,e){"use strict";e.r(a);var i=e("5116"),n=e.n(i);for(var r in i)"default"!==r&&function(t){e.d(a,t,function(){return i[t]})}(r);a["default"]=n.a},cd7b:function(t,a,e){"use strict";e.r(a);var i=e("edd1"),n=e("958d");for(var r in n)"default"!==r&&function(t){e.d(a,t,function(){return n[t]})}(r);e("412a");var d=e("2877"),o=Object(d["a"])(n["default"],i["a"],i["b"],!1,null,"510c58cb",null);a["default"]=o.exports},edd1:function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{staticClass:"alipay"},[e("v-uni-view",{staticClass:"items"},t._l(t.items,function(a,i){return e("v-uni-view",{key:i,staticClass:"item"},[e("v-uni-text",[t._v(t._s(a.t))]),t._v(":"),e("v-uni-input",{class:{"item-2":1==i,"item-5":5==i},attrs:{disabled:1==i,type:"text",placeholder:a.p},model:{value:a.v,callback:function(e){t.$set(a,"v",e)},expression:"item.v"}}),1==i?e("v-uni-view",{staticClass:"item-5-btn",on:{click:function(a){a=t.$handleEvent(a),t.getBankCardInfo(i)}}},[e("v-uni-image",{attrs:{src:"../../../../static/icon/xinji.png"}})],1):t._e(),5==i?e("v-uni-view",{staticClass:"item-2-btn",on:{click:function(a){a=t.$handleEvent(a),t.getCode(a)}}},[t._v(t._s(t.codeBtnTxt))]):t._e()],1)}),1),e("v-uni-view",{staticClass:"btn",on:{click:function(a){a=t.$handleEvent(a),t.bindAlipay(a)}}},[t._v("立即绑定")])],1)},n=[];e.d(a,"a",function(){return i}),e.d(a,"b",function(){return n})}}]);