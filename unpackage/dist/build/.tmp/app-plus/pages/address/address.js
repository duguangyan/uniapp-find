(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/address/address"],{"0567":function(t,e,s){},"597e":function(t,e,s){"use strict";var a=s("0567"),i=s.n(a);i.a},"74a1":function(t,e,s){"use strict";s.r(e);var a=s("9710"),i=s.n(a);for(var d in a)"default"!==d&&function(t){s.d(e,t,function(){return a[t]})}(d);e["default"]=i.a},"8c4b":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("view",{staticClass:"address"},[t.isEmpty?s("view",{staticClass:"text-center no-address fs30"},[t._m(0),s("view",{staticClass:"no-address-text text-gray"},[t._v("暂无收货地址")]),s("view",{staticClass:"text-999"},[t._v("您可以新增地址已方便收货")])]):t._e(),t.isEmpty?t._e():s("view",{staticClass:"consignee-address"},[s("view",{staticClass:"items"},t._l(t.addressList,function(e,a){return s("view",{key:a,staticClass:"item"},[s("view",{attrs:{eventid:"32ffb4e1-0-"+a},on:{click:function(s){t.goBlack(e,a)}}},[s("view",{staticClass:"v1 cf fs28"},[s("text",[t._v(t._s(e.consignee))]),s("text",{staticClass:"mgl-20"},[t._v(t._s(e.mobile))]),s("text",{staticClass:"remark fs24 flr"},[t._v(t._s(e.remark||""))]),s("text",{staticClass:"flr fs24 stall"},[t._v(t._s(e.stall||""))])]),s("view",{staticClass:"v2 mgt-20 fs28 text-333"},[t._v(t._s(e.address==e.room?e.address:e.address+e.room))])]),s("view",{staticClass:"v2 mgt-20 fs28 text-333 text-yellow",attrs:{eventid:"32ffb4e1-1-"+a},on:{click:function(s){t.goBlack(e,a)}}},[t._v(t._s(e.distance_text))]),s("view",{staticClass:"v3 cf mgt-30"},[s("view",{staticClass:"fll",attrs:{eventid:"32ffb4e1-2-"+a},on:{click:function(s){t.setDefaultAddress(e,a)}}},[1==e.is_default?s("text",{staticClass:"iconfont icon-dui icon-dui-1 fs40 pdl-10 text-yellow"}):t._e(),0==e.is_default?s("text",{staticClass:"iconfont icon-dui icon-yuan-1 fs40 pdl-10 text-eb"}):t._e(),s("text",{staticClass:"mgl-20 text-999",class:1==e.is_default?"text-yellow":""},[t._v("默认地址")])]),s("view",{staticClass:"flr cf"},[s("view",{staticClass:"i1 fll text-999",attrs:{eventid:"32ffb4e1-3-"+a},on:{click:function(s){t.edit(e.id)}}},[s("image",{attrs:{src:"/static/icon/edit.png",mode:""}}),s("text",[t._v("编辑")])]),s("view",{staticClass:"i2 fll text-999 mgl-20",attrs:{eventid:"32ffb4e1-4-"+a},on:{click:function(s){t.del(e.id,a)}}},[s("image",{attrs:{src:"/static/icon/add_del.png",mode:""}}),s("text",[t._v("删除")])])])])])}))]),s("view",{staticClass:"height100"}),s("view",{staticClass:"bottom-fixed text-center text-white h100 lh100 fs32 bg-yellow",attrs:{eventid:"32ffb4e1-5"},on:{click:t.goNewAddress}},[t._v("+ 新建收货地址")])])},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("view",[s("text",{staticClass:"iconfont icon-genggaishouhuodizhi text-gray",staticStyle:{"font-size":"220rpx",color:"#DFDFDF"}})])}];s.d(e,"a",function(){return a}),s.d(e,"b",function(){return i})},9710:function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=d(s("e378")),i=d(s("0089"));function d(t){return t&&t.__esModule?t:{default:t}}var n={data:function(){return{editTitle1:"编辑",editTitle2:"编辑",isFullAddress:!1,isEmpty:!0,from:"",addressList:[],hasAddressNum1:"",hasAddressNum2:"",findIndex:""}},onLoad:function(t){t.from&&(this.$data.from=t.from,"findPage"!=this.$data.from&&"fetchPage"!=this.$data.from||(this.$data.findIndex=t.findIndex))},onShow:function(){this.$data.editTitle1="编辑",this.$data.editTitle2="编辑",this.getAddressListData()},methods:{setDefaultAddress:function(t,e){this.$data.addressList.forEach(function(t,e){t.is_default=0}),this.$data.addressList[e].is_default=1,i.default.defaultAddress({method:"POST",data:{id:t.id}}).then(function(t){200==t.code||t.code,a.default.successTips(t.msg)}).catch(function(t){a.default.successTips(t.msg||t.message)})},goNewAddress:function(){t.navigateTo({url:"../addressNew/addressNew?type=new"})},editShow:function(t){var e=t.currentTarget.dataset.index;1==e?(this.$data.editTitle2="编辑","编辑"==this.$data.editTitle1?this.$data.editTitle1="完成":this.$data.editTitle1="编辑"):(this.$data.editTitle1="编辑","编辑"==this.$data.editTitle2?this.$data.editTitle2="完成":this.$data.editTitle2="编辑")},setDefault:function(e){var s=this;console.log(e);var a=e.currentTarget.dataset.id,d=e.currentTarget.dataset.index;i.default.setDefaultAddress({method:"POST",data:{address_id:a}}).then(function(e){var a=s.data.addressList;a.forEach(function(t){1==t.is_default&&(t.is_default=0)}),a[d].is_default=1,s.setData({addressList:a}),t.showToast({title:"已设为默认地址"})})},edit:function(e){t.navigateTo({url:"../addressNew/addressNew?type=edit&id=".concat(e)})},del:function(e,s){var a=this;t.showModal({title:"提示",content:"确定要删除吗？",success:function(s){s.confirm?(console.log("用户点击确定"),i.default.deleteAddress({method:"POST",data:{id:e}}).then(function(s){t.showToast({title:"删除成功"});var i=t.getStorageSync("defaultAddress").id;i&&e==i&&t.setStorageSync("defaultAddress",!1),a.$data.addressList=[],a.$data.isEmpty=!0,a.getAddressListData()})):s.cancel&&console.log("用户点击取消")}})},getAddressListData:function(){var t=this;i.default.listAddress({}).then(function(e){if(0==e.code||200==e.code){var s=e.data,a=s.length<=0||null==s||void 0==s,i=0,d=0;s.forEach(function(t,e){0==t.area_id?d++:i++}),t.$data.addressList=s,t.$data.isEmpty=a,t.$data.hasAddressNum1=i,t.$data.hasAddressNum2=d}else 1==e.code&&(t.$data.addressList=[],t.$data.isEmpty=!0)})},goBlack:function(t){if("findPage"==this.$data.from){var e={address:t,findIndex:this.$data.findIndex};this.$eventHub.$emit("findPage",e)}if("fetchPage"==this.$data.from){var s={address:t,findIndex:this.$data.findIndex};this.$eventHub.$emit("fetchPage",s)}if("taskPayPage"==this.$data.from){var a={address:t};this.$eventHub.$emit("taskPayPage",a)}wx.navigateBack({delta:1})}}};e.default=n}).call(this,s("6e42")["default"])},d1ee:function(t,e,s){"use strict";s("a3d9");var a=d(s("b0ce")),i=d(s("d424"));function d(t){return t&&t.__esModule?t:{default:t}}Page((0,a.default)(i.default))},d424:function(t,e,s){"use strict";s.r(e);var a=s("8c4b"),i=s("74a1");for(var d in i)"default"!==d&&function(t){s.d(e,t,function(){return i[t]})}(d);s("597e");var n=s("2877"),c=Object(n["a"])(i["default"],a["a"],a["b"],!1,null,"e7008e5e",null);e["default"]=c.exports}},[["d1ee","common/runtime","common/vendor"]]]);